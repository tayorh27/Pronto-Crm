(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{TDBs:function(e,t,n){"use strict";n.r(t),n.d(t,"DashboardModule",(function(){return G}));var i=n("tyNb"),o=n("ofXK"),a=n("3Pt+"),r=n("OsiS"),s=n("ZAI4"),c=(n("5x/H"),n("Zs65"),n("Wcq6")),l=n("P9ut"),d=n("fXoL"),u=n("bTqV"),b=n("Qu3c"),h=n("PSD3"),f=n.n(h),p=n("4WDQ"),g=n("WONP"),v=n("QebF"),m=n("tk/3"),y=n("kmnG"),C=n("qFsG");function w(e,t){if(1&e){var n=d.Wb();d.Vb(0,"div",4),d.Vb(1,"legend"),d.Nc(2,"Your Status"),d.Ub(),d.Vb(3,"label"),d.Vb(4,"input",5),d.gc("change",(function(){return d.Cc(n),d.kc().toggleStatus()}))("ngModelChange",(function(e){return d.Cc(n),d.kc().techStatus=e})),d.Ub(),d.Qb(5,"span",6),d.Nc(6),d.Ub(),d.Vb(7,"p"),d.Nc(8,"No jobs available at the moment."),d.Ub(),d.Ub()}if(2&e){var i=d.kc();d.Cb(4),d.qc("ngModel",i.techStatus),d.Cb(2),d.Pc(" GO ",i.techStatus?"OFFLINE":"ONLINE"," ")}}function V(e,t){1&e&&(d.Vb(0,"div"),d.Qb(1,"br"),d.Vb(2,"p"),d.Nc(3,"You have been assigned a Job from Pronto, please accept/reject this request."),d.Ub(),d.Ub())}function U(e,t){if(1&e){var n=d.Wb();d.Vb(0,"div",33),d.Vb(1,"mat-form-field",34),d.Vb(2,"textarea",35),d.gc("ngModelChange",(function(e){return d.Cc(n),d.kc(3)._note=e})),d.Ub(),d.Ub(),d.Ub()}if(2&e){var i=d.kc(3);d.Cb(2),d.qc("ngModel",i._note)}}function k(e,t){if(1&e){var n=d.Wb();d.Vb(0,"button",36),d.gc("click",(function(){return d.Cc(n),d.kc(3).acceptPendingJob()})),d.Nc(1," Accept "),d.Ub()}}function S(e,t){if(1&e){var n=d.Wb();d.Vb(0,"button",37),d.gc("click",(function(){return d.Cc(n),d.kc(3).submitCancelJob()})),d.Nc(1," Submit "),d.Ub()}}function P(e,t){if(1&e){var n=d.Wb();d.Vb(0,"div",22),d.Vb(1,"div",23),d.Vb(2,"div",24),d.Vb(3,"i",14),d.Nc(4,"assignment"),d.Ub(),d.Ub(),d.Vb(5,"h4",25),d.Nc(6,"Your attention is needed here!"),d.Ub(),d.Ub(),d.Vb(7,"div",26),d.Lc(8,V,4,0,"div",27),d.Lc(9,U,3,1,"div",28),d.Ub(),d.Vb(10,"div",29),d.Vb(11,"button",30),d.gc("click",(function(){return d.Cc(n),d.kc(2).cancelPendingJob()})),d.Nc(12),d.Ub(),d.Lc(13,k,2,0,"button",31),d.Lc(14,S,2,0,"button",32),d.Ub(),d.Ub()}if(2&e){var i=d.kc(2);d.Cb(8),d.qc("ngIf",!i.cancelPending),d.Cb(1),d.qc("ngIf",i.cancelPending),d.Cb(3),d.Pc(" ",i.cancelPending?"Cancel":"Reject"," "),d.Cb(1),d.qc("ngIf",!i.cancelPending),d.Cb(1),d.qc("ngIf",i.cancelPending)}}function N(e,t){1&e&&(d.Vb(0,"div"),d.Qb(1,"br"),d.Vb(2,"p"),d.Nc(3,'Please click on the "Start Button" below when you are about to start the job.'),d.Ub(),d.Ub())}function I(e,t){if(1&e){var n=d.Wb();d.Vb(0,"div",33),d.Vb(1,"mat-form-field",34),d.Vb(2,"textarea",35),d.gc("ngModelChange",(function(e){return d.Cc(n),d.kc(3)._note=e})),d.Ub(),d.Ub(),d.Ub()}if(2&e){var i=d.kc(3);d.Cb(2),d.qc("ngModel",i._note)}}function T(e,t){if(1&e){var n=d.Wb();d.Vb(0,"button",36),d.gc("click",(function(){return d.Cc(n),d.kc(3).acceptAssignedJob()})),d.Nc(1," Start Job "),d.Ub()}}function J(e,t){if(1&e){var n=d.Wb();d.Vb(0,"button",37),d.gc("click",(function(){return d.Cc(n),d.kc(3).submitCancelJob()})),d.Nc(1," Submit "),d.Ub()}}function _(e,t){if(1&e){var n=d.Wb();d.Vb(0,"div",22),d.Vb(1,"div",23),d.Vb(2,"div",24),d.Vb(3,"i",14),d.Nc(4,"assignment"),d.Ub(),d.Ub(),d.Vb(5,"h4",25),d.Nc(6,"Job Assigned"),d.Ub(),d.Ub(),d.Vb(7,"div",26),d.Lc(8,N,4,0,"div",27),d.Lc(9,I,3,1,"div",28),d.Ub(),d.Vb(10,"div",29),d.Vb(11,"button",30),d.gc("click",(function(){return d.Cc(n),d.kc(2).cancelAssignedJob()})),d.Nc(12),d.Ub(),d.Lc(13,T,2,0,"button",31),d.Lc(14,J,2,0,"button",32),d.Ub(),d.Ub()}if(2&e){var i=d.kc(2);d.Cb(8),d.qc("ngIf",!i.cancelAssigned),d.Cb(1),d.qc("ngIf",i.cancelAssigned),d.Cb(3),d.Pc(" ",i.cancelAssigned?"Cancel":"Cancel Job"," "),d.Cb(1),d.qc("ngIf",!i.cancelAssigned),d.Cb(1),d.qc("ngIf",i.cancelAssigned)}}function A(e,t){1&e&&(d.Vb(0,"div"),d.Qb(1,"br"),d.Vb(2,"p"),d.Nc(3,'Please click on the "Finish Job Button" below when you are done with the job.'),d.Ub(),d.Ub())}function q(e,t){if(1&e){var n=d.Wb();d.Vb(0,"div",33),d.Vb(1,"mat-form-field",34),d.Vb(2,"textarea",35),d.gc("ngModelChange",(function(e){return d.Cc(n),d.kc(3)._note=e})),d.Ub(),d.Ub(),d.Ub()}if(2&e){var i=d.kc(3);d.Cb(2),d.qc("ngModel",i._note)}}function x(e,t){if(1&e){var n=d.Wb();d.Vb(0,"button",36),d.gc("click",(function(){return d.Cc(n),d.kc(3).completeJob()})),d.Nc(1," Finish Job "),d.Ub()}}function L(e,t){if(1&e){var n=d.Wb();d.Vb(0,"button",37),d.gc("click",(function(){return d.Cc(n),d.kc(3).submitCancelJob()})),d.Nc(1," Submit "),d.Ub()}}function B(e,t){if(1&e){var n=d.Wb();d.Vb(0,"div",22),d.Vb(1,"div",23),d.Vb(2,"div",24),d.Vb(3,"i",14),d.Nc(4,"assignment"),d.Ub(),d.Ub(),d.Qb(5,"h4",25),d.Ub(),d.Vb(6,"div",26),d.Lc(7,A,4,0,"div",27),d.Lc(8,q,3,1,"div",28),d.Ub(),d.Vb(9,"div",29),d.Vb(10,"button",30),d.gc("click",(function(){return d.Cc(n),d.kc(2).cancelProgressJob()})),d.Nc(11),d.Ub(),d.Lc(12,x,2,0,"button",31),d.Lc(13,L,2,0,"button",32),d.Ub(),d.Ub()}if(2&e){var i=d.kc(2);d.Cb(7),d.qc("ngIf",!i.cancelProgress),d.Cb(1),d.qc("ngIf",i.cancelProgress),d.Cb(3),d.Pc(" ",i.cancelProgress?"Cancel":"Cancel Job"," "),d.Cb(1),d.qc("ngIf",!i.cancelProgress),d.Cb(1),d.qc("ngIf",i.cancelProgress)}}function O(e,t){if(1&e&&(d.Vb(0,"li",12),d.Vb(1,"div",38),d.Vb(2,"i",14),d.Nc(3,"people"),d.Ub(),d.Ub(),d.Vb(4,"div",15),d.Vb(5,"div",16),d.Vb(6,"span",39),d.Nc(7,"CUSTOMER INFO"),d.Ub(),d.Ub(),d.Vb(8,"div",18),d.Vb(9,"div",40),d.Vb(10,"div",41),d.Vb(11,"div",42),d.Vb(12,"a",43),d.Qb(13,"img",44),d.Ub(),d.Ub(),d.Vb(14,"div",26),d.Vb(15,"h6",45),d.Nc(16),d.Ub(),d.Vb(17,"h4",25),d.Nc(18),d.Ub(),d.Vb(19,"p",46),d.Nc(20),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(21,"h6"),d.Qb(22,"i",47),d.Nc(23),d.Ub(),d.Ub(),d.Ub()),2&e){var n=d.kc(2);d.Cb(16),d.Pc(" ",n.selectedJob.customer.email," "),d.Cb(2),d.Pc(" ",n.selectedJob.customer.phone," "),d.Cb(2),d.Pc(" ",n.selectedJob.customer.address," "),d.Cb(3),d.Pc(" ",n.selectedJob.customer.name,"")}}var E=function(e){return{color:e}};function M(e,t){if(1&e&&(d.Vb(0,"div",7),d.Vb(1,"div",8),d.Lc(2,P,15,5,"div",9),d.Lc(3,_,15,5,"div",9),d.Lc(4,B,14,5,"div",9),d.Ub(),d.Vb(5,"div",10),d.Vb(6,"ul",11),d.Vb(7,"li",12),d.Vb(8,"div",13),d.Vb(9,"i",14),d.Nc(10,"work"),d.Ub(),d.Ub(),d.Vb(11,"div",15),d.Vb(12,"div",16),d.Vb(13,"span",17),d.Nc(14,"JOB REQUEST"),d.Ub(),d.Ub(),d.Vb(15,"div",18),d.Vb(16,"p"),d.Nc(17," Comment: "),d.Qb(18,"br"),d.Vb(19,"strong"),d.Nc(20),d.Ub(),d.Ub(),d.Qb(21,"br"),d.Vb(22,"p",19),d.Nc(23," Status: "),d.Qb(24,"br"),d.Vb(25,"strong"),d.Nc(26),d.Ub(),d.Ub(),d.Qb(27,"br"),d.Vb(28,"p"),d.Nc(29,"Request:"),d.Ub(),d.Qb(30,"div",20),d.Ub(),d.Ub(),d.Ub(),d.Lc(31,O,24,4,"li",21),d.Ub(),d.Ub(),d.Ub()),2&e){var n=d.kc();d.Cb(2),d.qc("ngIf","Pending"===n.selectedJob.status),d.Cb(1),d.qc("ngIf","Assigned"===n.selectedJob.status),d.Cb(1),d.qc("ngIf","In-Progress"===n.selectedJob.status||"Pending Approval"===n.selectedJob.status),d.Cb(16),d.Oc(n.selectedJob.note),d.Cb(2),d.qc("ngStyle",d.uc(8,E,n.getStatusColorByName(n.selectedJob.status))),d.Cb(4),d.Oc(n.selectedJob.status),d.Cb(4),d.qc("innerHTML",n.displayHTMLCategories(n.selectedJob.category),d.Dc),d.Cb(1),d.qc("ngIf","Assigned"===n.selectedJob.status||"In-Progress"===n.selectedJob.status||"Pending Approval"===n.selectedJob.status)}}var F=function(){function e(e,t){this.http=e,this.previewProgressSpinner=t,this.service=new l.a,this.config=new p.a,this.techStatus=!1,this.statuses=[],this.categories=[],this.cancelPending=!1,this.cancelAssigned=!1,this.cancelProgress=!1,this._note=""}return e.prototype.getCurrentJob=function(){var e=this,t=localStorage.getItem("email");c.firestore().collection("jobs").where("assigned_to.email","==",t).where("back_end_status","==","active").onSnapshot((function(t){0!==t.size&&(e.selectedJob=t.docs[0].data(),"Pending"===e.selectedJob.status&&e.playAudio())}))},e.prototype.ngOnInit=function(){var e=this,t=localStorage.getItem("email");this.service.getUserData(t).then((function(t){e.techStatus="online"===t.status,e.getStatus()}))},e.prototype.getStatus=function(){var e=this;c.firestore().collection("status").orderBy("name","desc").get().then((function(t){e.statuses=[],t.forEach((function(t){var n=t.data();e.statuses.push(n)})),e.getCategories()}))},e.prototype.getStatusColorByName=function(e){return this.statuses.find((function(t,n,i){return t.name===e})).color},e.prototype.getCategories=function(){var e=this;c.firestore().collection("categories").orderBy("name","desc").onSnapshot((function(t){e.categories=[],t.forEach((function(t){var n=t.data();e.categories.push(n)})),e.getCurrentJob()}))},e.prototype.getCategoryNameById=function(e){return this.categories.find((function(t,n,i){return t.id===e})).name},e.prototype.displayHTMLCategories=function(e){var t=this,n="<ul>";return e.forEach((function(e){var i=t.getCategoryNameById(e);n+=void 0===i?"":"<li><strong>"+i+"</strong></li>"})),n+="</ul>"},e.prototype.toggleStatus=function(){var e=this,t=localStorage.getItem("email");this.config.updateTechnicianStatus(t,this.techStatus?"online":"offline").then((function(t){e.config.displayMessage("Updated successfully",!1)}))},e.prototype.cancelPendingJob=function(){this.cancelPending=!this.cancelPending},e.prototype.acceptPendingJob=function(){var e=this;this.previewProgressSpinner.open({hasBackdrop:!0},g.a),this.config.updateJobStatus(this.http,"Assigned","",this.selectedJob).then((function(t){return n=e,void 0,o=function(){return function(e,t){var n,i,o,a,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,i=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!((o=(o=r.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(6===a[0]&&r.label<o[1]){r.label=o[1],o=a;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(a);break}o[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}(this,(function(e){return this.config.sendSMS(this.http,this.selectedJob.customer.phone,"A technician will be with you shortly. \nName: "+this.selectedJob.assigned_to.name+"\nPhone: "+this.selectedJob.assigned_to.phone,"","sms",""),this.previewProgressSpinner.close(),[2]}))},new((i=void 0)||(i=Promise))((function(e,t){function a(e){try{s(o.next(e))}catch(n){t(n)}}function r(e){try{s(o.throw(e))}catch(n){t(n)}}function s(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(e){e(n)}))).then(a,r)}s((o=o.apply(n,[])).next())}));var n,i,o}))},e.prototype.submitCancelJob=function(){var e=this;f()({title:"Cancelation Alert",text:"Are you sure about canceling this job?",type:"warning",showCancelButton:!0,confirmButtonText:"Yes, cancel it!",cancelButtonText:"No, keep it",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then((function(t){if(t.value){if(""===e._note)return void e.config.displayMessage("Enter your reasons",!1);e.previewProgressSpinner.open({hasBackdrop:!0},g.a),e.config.updateJobStatus(e.http,"Canceled",e._note,e.selectedJob).then((function(t){e.previewProgressSpinner.close()}))}else f()({title:"Cancelled",text:"Cancelation not successful",type:"error",confirmButtonClass:"btn btn-info",buttonsStyling:!1}).catch(f.a.noop)}))},e.prototype.cancelAssignedJob=function(){this.cancelAssigned=!this.cancelAssigned},e.prototype.acceptAssignedJob=function(){var e=this;this.previewProgressSpinner.open({hasBackdrop:!0},g.a),this.config.updateJobStatus(this.http,"In-Progress","",this.selectedJob).then((function(t){e.previewProgressSpinner.close()}))},e.prototype.cancelProgressJob=function(){this.cancelProgress=!this.cancelProgress},e.prototype.completeJob=function(){var e=this;this.previewProgressSpinner.open({hasBackdrop:!0},g.a),this.config.updateJobStatus(this.http,"Pending Approval","",this.selectedJob).then((function(t){e.previewProgressSpinner.close()}))},e.prototype.playAudio=function(){var e=new Audio;e.src="assets/audio/alarm-clock-23772.mp3",e.load(),e.play()},e.\u0275fac=function(t){return new(t||e)(d.Pb(m.a),d.Pb(v.b))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-technician-dashboard"]],decls:4,vars:2,consts:[[1,"main-content"],[1,"container-fluid"],["class","togglebutton",4,"ngIf"],["class","row",4,"ngIf"],[1,"togglebutton"],["type","checkbox","checked","",3,"ngModel","change","ngModelChange"],[1,"toggle"],[1,"row"],[1,"col-md-4"],["class","card",4,"ngIf"],[1,"col-md-8"],[1,"timeline","timeline-simple"],[1,"timeline-inverted"],[1,"timeline-badge","info"],[1,"material-icons"],[1,"timeline-panel"],[1,"timeline-heading"],[1,"badge","badge-info"],[1,"timeline-body"],["id","stat",3,"ngStyle"],[3,"innerHTML"],["class","timeline-inverted",4,"ngIf"],[1,"card"],[1,"card-header","card-header-primary","card-header-icon"],[1,"card-icon"],[1,"card-title"],[1,"card-body"],[4,"ngIf"],["class","form-group mx-sm-3 mb-2",4,"ngIf"],[1,"card-footer"],["mat-raised-button","","type","button",1,"btn","btn-round","btn-danger",3,"click"],["mat-raised-button","","type","button","class","btn btn-round btn-success",3,"click",4,"ngIf"],["mat-raised-button","","type","button","class","btn btn-round btn-primary",3,"click",4,"ngIf"],[1,"form-group","mx-sm-3","mb-2"],[1,"example-full-width"],["matInput","","placeholder","Enter Reasons For Cancelation","name","nt","id","idnt",1,"form-control",3,"ngModel","ngModelChange"],["mat-raised-button","","type","button",1,"btn","btn-round","btn-success",3,"click"],["mat-raised-button","","type","button",1,"btn","btn-round","btn-primary",3,"click"],[1,"timeline-badge","danger"],[1,"badge","badge-danger"],[1,"col-md-6"],[1,"card","card-profile"],[1,"card-avatar"],["href","javascript:void(0)"],["src","assets/img/default-avatar.png",1,"img"],[1,"card-category","text-gray"],[1,"card-description"],[1,"ti-time"]],template:function(e,t){1&e&&(d.Vb(0,"div",0),d.Vb(1,"div",1),d.Lc(2,w,9,2,"div",2),d.Lc(3,M,32,10,"div",3),d.Ub(),d.Ub()),2&e&&(d.Cb(2),d.qc("ngIf",!t.selectedJob),d.Cb(1),d.qc("ngIf",t.selectedJob))},directives:[o.m,a.b,a.q,a.t,o.n,u.b,y.c,C.b,a.e],encapsulation:2}),e}();function W(e,t){if(1&e&&(d.Vb(0,"div",5),d.Vb(1,"div",6),d.Vb(2,"div",7),d.Vb(3,"div",8),d.Vb(4,"div",9),d.Vb(5,"i",10),d.Nc(6,"inbox"),d.Ub(),d.Ub(),d.Vb(7,"p",11),d.Nc(8,"Total Tickets"),d.Ub(),d.Vb(9,"h3",12),d.Nc(10),d.Ub(),d.Ub(),d.Vb(11,"div",13),d.Vb(12,"div",14),d.Vb(13,"i",10),d.Nc(14,"pageview"),d.Ub(),d.Vb(15,"a",15),d.Nc(16,"View"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(17,"div",6),d.Vb(18,"div",7),d.Vb(19,"div",16),d.Vb(20,"div",9),d.Vb(21,"i",10),d.Nc(22,"article"),d.Ub(),d.Ub(),d.Vb(23,"p",11),d.Nc(24,"Enqueued Tickets"),d.Ub(),d.Vb(25,"h3",12),d.Nc(26),d.Ub(),d.Ub(),d.Vb(27,"div",13),d.Vb(28,"div",14),d.Vb(29,"i",10),d.Nc(30,"pageview"),d.Ub(),d.Vb(31,"a",15),d.Nc(32,"View"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(33,"div",6),d.Vb(34,"div",7),d.Vb(35,"div",17),d.Vb(36,"div",9),d.Vb(37,"i",10),d.Nc(38,"exit_to_app"),d.Ub(),d.Ub(),d.Vb(39,"p",11),d.Nc(40,"Assigned Tickets"),d.Ub(),d.Vb(41,"h3",12),d.Nc(42),d.Ub(),d.Ub(),d.Vb(43,"div",13),d.Vb(44,"div",14),d.Vb(45,"i",10),d.Nc(46,"pageview"),d.Ub(),d.Vb(47,"a",15),d.Nc(48,"View"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(49,"div",6),d.Vb(50,"div",7),d.Vb(51,"div",18),d.Vb(52,"div",9),d.Vb(53,"i",10),d.Nc(54,"task_alt"),d.Ub(),d.Ub(),d.Vb(55,"p",11),d.Nc(56,"Resolved Tickets"),d.Ub(),d.Vb(57,"h3",12),d.Nc(58),d.Ub(),d.Ub(),d.Vb(59,"div",13),d.Vb(60,"div",14),d.Vb(61,"i",10),d.Nc(62,"pageview"),d.Ub(),d.Vb(63,"a",15),d.Nc(64,"View"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&e){var n=d.kc();d.Cb(10),d.Oc(n.totalTicketCount),d.Cb(16),d.Oc(n.enqueuedCount),d.Cb(16),d.Oc(n.assignedCount),d.Cb(16),d.Oc(n.resolvedCount)}}var j=function(){return["/customer"]};function Q(e,t){if(1&e&&(d.Vb(0,"div",5),d.Vb(1,"div",6),d.Vb(2,"div",7),d.Vb(3,"div",17),d.Vb(4,"div",9),d.Vb(5,"i",10),d.Nc(6,"people"),d.Ub(),d.Ub(),d.Vb(7,"p",11),d.Nc(8,"Contacts"),d.Ub(),d.Vb(9,"h3",12),d.Nc(10),d.Ub(),d.Ub(),d.Vb(11,"div",13),d.Vb(12,"div",14),d.Vb(13,"i",19),d.Nc(14,"pageview"),d.Ub(),d.Vb(15,"a",20),d.Nc(16,"View"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&e){var n=d.kc();d.Cb(10),d.Oc(n.totalCustomer),d.Cb(5),d.qc("routerLink",d.tc(2,j))}}function H(e,t){if(1&e){var n=d.Wb();d.Vb(0,"tr"),d.Vb(1,"td",33),d.Nc(2),d.Ub(),d.Vb(3,"td",34),d.Vb(4,"button",35),d.gc("click",(function(){d.Cc(n);var e=t.$implicit;return d.kc(2).updateNot(e.id)})),d.Vb(5,"i",10),d.Nc(6,"check"),d.Ub(),d.Ub(),d.Ub(),d.Ub()}if(2&e){var i=t.$implicit;d.Cb(2),d.Oc(i.message),d.Cb(2),d.qc("matTooltipPosition","left")}}function R(e,t){if(1&e&&(d.Vb(0,"div",21),d.Vb(1,"div",22),d.Vb(2,"div",23),d.Vb(3,"div",24),d.Vb(4,"div",25),d.Vb(5,"div",26),d.Vb(6,"span",27),d.Nc(7),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(8,"div",28),d.Vb(9,"div",29),d.Vb(10,"div",30),d.Vb(11,"table",31),d.Vb(12,"tbody"),d.Lc(13,H,7,2,"tr",32),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&e){var n=d.kc();d.Cb(7),d.Pc("Notifications: ",n.notification_count,""),d.Cb(6),d.qc("ngForOf",n.notifications)}}function z(e,t){1&e&&d.Qb(0,"app-technician-dashboard")}var D=[{path:"",children:[{path:"dashboard",component:function(){function e(){this.service=new l.a,this.totalCustomer=0,this.totalTechnician=0,this.totalJob=0,this.jobStatus=[],this.user_type="",this.notification_count=0,this.notifications=[],this.tickets=[],this.totalTicketCount=0,this.enqueuedCount=0,this.assignedCount=0,this.resolvedCount=0}return e.prototype.getTickets=function(){var e=this;c.firestore().collection("tickets").orderBy("timestamp","desc").onSnapshot((function(t){e.tickets=[],t.forEach((function(t){var n=t.data();e.tickets.push(n)})),e.totalTicketCount=e.tickets.length,e.enqueuedCount=e.getTicketsByTypeCount("enqueue"),e.assignedCount=e.getTicketsByTypeCount("assigned"),e.resolvedCount=e.getTicketsByTypeCount("resolved")}))},e.prototype.getTicketsByTypeCount=function(e){return this.tickets.filter((function(t,n,i){return t.ticket_type.toLowerCase()===e.toLowerCase()})).length},e.prototype.getNotifications=function(){var e=this,t=localStorage.getItem("email");c.firestore().collection("notifications").where("email","==",t).where("read","==",!1).orderBy("timestamp","desc").onSnapshot((function(t){e.notifications=[],e.notification_count=t.size,t.forEach((function(t){var n=t.data();e.notifications.push(n)}))}))},e.prototype.updateNot=function(e){return t=this,void 0,i=function(){return function(e,t){var n,i,o,a,r={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(o=2&a[0]?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return r.label++,{value:a[1],done:!1};case 5:r.label++,i=a[1],a=[0];continue;case 7:a=r.ops.pop(),r.trys.pop();continue;default:if(!((o=(o=r.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){r=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(6===a[0]&&r.label<o[1]){r.label=o[1],o=a;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(a);break}o[2]&&r.ops.pop(),r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s],i=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}}(this,(function(t){switch(t.label){case 0:return[4,c.firestore().collection("notifications").doc(e).update({read:!0})];case 1:return t.sent(),[2]}}))},new((n=void 0)||(n=Promise))((function(e,o){function a(e){try{s(i.next(e))}catch(t){o(t)}}function r(e){try{s(i.throw(e))}catch(t){o(t)}}function s(t){var i;t.done?e(t.value):(i=t.value,i instanceof n?i:new n((function(e){e(i)}))).then(a,r)}s((i=i.apply(t,[])).next())}));var t,n,i},e.prototype.getCustomer=function(){var e=this;c.firestore().collection("customers").get().then((function(t){e.totalCustomer=t.size}))},e.prototype.getTechnicians=function(){var e=this;c.firestore().collection("users").where("user_type","==","technician").get().then((function(t){e.totalTechnician=t.size}))},e.prototype.getJobs=function(){var e=this;c.firestore().collection("jobs").get().then((function(t){e.totalJob=t.size,t.forEach((function(t){var n=t.data(),i=e.checkIfExsit(n.status);if(i.e){var o=i.l;e.jobStatus.splice(i.i,1),e.jobStatus.push({status:n.status,length:o+1})}else e.jobStatus.push({status:n.status,length:1})}))}))},e.prototype.checkIfExsit=function(e){for(var t=0,n=!1,i=0,o=0;o<this.jobStatus.length;o++)this.jobStatus[o].status==e&&(t=o,n=!0,i=this.jobStatus[o].length);return{i:t,e:n,l:i}},e.prototype.ngOnInit=function(){var e=this,t=localStorage.getItem("email");this.service.getUserData(t).then((function(t){e.user_type=t.user_type,"admin"===t.user_type&&(e.getTickets(),e.getCustomer(),e.getNotifications())}))},e.prototype.getQuestion=function(e,t){for(var n={},i=0,o=0,a=0;a<e.length;a++){var r,s=e[a],c=t[a],l=s.substring(s.length-2);if(l.split("")[0].match(/^\d/))if(null==n[r=l.split("")[0]])n[r]="OK"===c?1:-1;else{var d="OK"===c?1:-1;n[r]<0&&(d=1),n[r]=n[r]*d}else void 0===n[r=l.split("")[1]]?n[r]="OK"===c?1:-1:(d="OK"===c?1:-1,n[r]<0&&(d=1),n[r]=n[r]*d)}for(var u in console.log(n),n)o+=1,n[u]>0&&(i+=1);var b=Math.round(100*i/o);console.log(b)},e.prototype.ngAfterViewInit=function(){},e.prototype.workQuiz=function(){var e="Quiz(\n      id: \"2\",\n      articleId: \"\",\n      name: 'Socio-Economic',\n      description: 'How Well Do You Know Your Socio-Economic?',\n      color: MyColors.apple_color,\n      questions: [";"\nFill in the blank: Saskatchewan\u2019s approach to re-opening is a ___ approach comprised of ___ . \nPhased, 4 Phases \nLayered, 6 Layers \nHierarchal, 5 Hierarchies \nPhased, 5 Phases \n|\nWith regards to going back to work, what should employees do for preventative measures of contracting or spreading Covid \u2013 19\nStay home if sick or feeling unwell \nEnsure work areas are cleaning and disinfected \nContinue to practice social distancing \nAvoid unnecessary travel \nAll of the above\n|\nTrue or false, non-medical masks and cloth face coverings are considered personal protective equipment (PPE).\nTrue\nFalse: Only medical grade masks, face coverings and shields are considered personal protective equipment (PPE)\n|\nTrue or false, masks are appropriate and suitable for all types of occupations and jobs and as such should be worn.\nTrue\nFalse: wearing masks may not be suitable for all types of occupations and as such, employers should consult with their Occupational Health & Safety team and local public health before introduction mask-wearing policies into the workplace \n|\nThe Saskatchewan safe school plan has 8 areas of focus, they are? \nSafe: Attendance, Classrooms, Transportation, Supports, Access, Activities, Facilities & Alternatives \nSafe: Protocols, Teachers, Students, Areas, Rules, Distances, Grades, Food & Water \nSafe: Entertainment, Outdoor Activities, Indoor Activities, Clothing, Equipment, Sports, Food & Water\nSafe: Learning, Playing, Activities, Attendance, Teachers, Students, Admin, Travel \n|\nTrue or false: With schools re-opening Saskatchewan will be increasing their testing, with a focus on schools, including a school testing plan which will include testing students with parental consent and priority testing fore teachings and school staff.\nTrue: Covid-19 testing capacity in Saskatchewan increased over the month of September to accommodate the back to school plan. SaskHealth is working towards a daily capacity of 4,000 tests administered.\nFalse\n|\nTargeted monitoring in schools across Saskatchewan has begun with voluntary testing of students which must include:\nConsent of teachers and school staff\nChild/student consent \nConsent of parent and/or guardian \nConsent of doctors and the school board \n|\nTrue or false, under the Saskatchewan Safe Schools Plan, there are four phases of education delivery, including: full in in class learning with safety protocols, full in class learning with masks, reduced class sized learning and alternative learning opportunities \nTrue\nFalse\n|\nIf traveling outside of the country, individuals MUST: \nSelf isolate in the visiting country for 14 days and upon their return self isolate for 7 days \nSelf isolate in the visiting country for 10 business days and up their return self isolate for 14 business days \nSelf isolate in the visiting country for 14 days and upon their return self isolate for 14 days \nCasually self isolate between excursions and only self isolate upon their return if they feel ill or have Covid-19 related symptoms \n|\nTrue or false, every sector has been impacted by the Covid-19 pandemic in some way, shape or form?\nTrue: Every industry and sector worldwide has been impacted by the coronavirus, while it might not be all negative: safety protocols, communication, product demand, supply chain systems, travel, staffing, office usage, cash handling, health & safety are just a few areas where the impact can be seen the greatest \nFalse\n|\nTrue or false, as a result of Covid-19 people could experience social stigma as it relates to having or have had Covid-19. \nTrue: The current outbreak of coronavirus has provoked social stigma and discriminatory behaviours against people of certain ethnic backgrounds as well as anyone perceived to have been in contact with the virus. \nFalse\n|\nFill in the blank: \u201cStigma can undermine ____ cohesion and prompt possible _____ ___ of groups, which might contribute to a situation where the virus is more, not less, likely to sprea\nCultural, Cultural, Isolation  \nSocial, Social, Isolation\nCollective, Cultural, Distribution \nGroup, Community, Outcry\n|\nThe impact of social stigma around Covid-19 can create situations in which people might: \nHide the illness to avoid discrimination \nAvoid or prolong seeking health care immediately \nRefuse or avoid adopting healthy behaviours\nAll of the above\n|\nHow can community leaders and public health officials help stop or prevent stigma related to Covid-19?\nA. Maintain the privacy and confidentiality of those seeking healthcare, or those involved in a contact investigation\nB. Make sure the images used in communications show diverse communities and do not further or reinforce stereotypes \nC. Ignore negative behaviours, stereotypes or statements \u2013 including those on social media \nD. Share the risks or lack of risk, from contact with products, people, animals and places \nE. All of the above\nF.Options A, B & D\n|\nWhich individuals or groups may experience stigma or prejudice during the Covid-19 pandemic?\nA. People of privilege \nB. Certain racial and ethnic minority, including Asian-Canadians, Pacific Islanders, Indigenous, Black and/or those that identify as People of Colour/Culture \nC. Individuals who have tested positive for Covid-19; recovered from being sick with Covid-19; individuals who have been in contact with someone with Covid-19 and have quarantined for the appropriate amount of time\nD. Health care workers, caregivers or other frontline workers who may have been in contact or cared for someone with Covid-19\nE. People who have underline health issues similar to Covid-19 symptoms like cough or runny nose \nF. Individuals, cultural or religious groups that congregate in group settings or group living conditions \nG. All of the above\nH. Options B, C, D, E & F\n|\nMultiple health organizations and governments have discouraged and refrained from referring to Covid-19 as the \u201cAsian/Chinese/Wuhan flu\u201d because:\nThis language creates unnecessary stigma against a cultural group\nIt does not properly describe the virus, scientifically which is what is most important \nA person of origin has not yet been confirmed, the first recorded case had no connection to the Wuhan marketplace thus calling the virus anything but it\u2019s scientific name is misleading, inaccurate and dangerous \nAll of the above\nNone of the above\n|\nThe coronavirus impacted non-Canadians in the country, including: \nInternational students\nTemporary workers \nInternational Visitors \nRefugees & asylum claimants \nAll of the above\nNone of the above\n|\nTrue or false: Coronavirus is expected to affect fertility rates in Canada, as reported by Science magazine.\nTrue: \u201cHigh income countries, such as Canada, are expected to see fewer newborns as a result of the pandemic, thus an older population, and a smaller population size.\u201d \nFalse\n|\nHow can Canada avoid a labour market and economy decline even though fertility rates are dropping and may continue with that trend throughout the pandemic?\nPay women to have more babies \nIncrease immigration activities \nAdopt a more tech-reliant society where less people will have less of an impact \nPay men to have more babies \nDo nothing and just adapt to the changes \n|\nAccording to Immigration, Refugees and Citizenship Canada (IRCC), which month saw a 26% decline in immigration numbers in Canada?\nFebruary\nApril\nMarch\nJuly \n|\nWhat is CERB?\nThe Canadian Emergency Rainy-day Bank-roll which provides a \u2018slush\u2019 fund for \u2018panic spending\u2019 during the pandemic\nThe Canadian Economy Response Benefit which provides temporary income to stimulate the economy as to avoid going into a recession \nThe Canadian Emergency Response Benefit which provides temporary income to those affected by the ongoing coronavirus pandemic.\nA program to help non-Canadians stay in Canada through funding their travel during the pandemic \n|\nMany people utilized their quarantine time to learn something new and advance their knowledge on a/many particular topics or subjects. What are two free online resources you can utilize to help empower your continued learning?\nSask Polytechnic online & Canada.ca \nCoursera.org & edX.org \ntrulyalivefoundation.org & immigration.ca \nyoutube.com & facebook.com \n|\nTrue or false, as it relates to places of worship it is recommended by the Saskatchewan government that if possible, delivery of services/sermons should be done virtually/online or delivered as a drive-in service with individuals encouraged to remain in their vehicles as much as possible.\nTrue: Vehicles must remain a minimum of 2 meters apart with recommendations to refrain from using washroom facilities.\nFalse\n|\nTrue or false: Workplaces are exempt from the restriction on the size of indoor and outdoor gathering. However, two meter distancing between individuals should still be maintained.\nTrue: If two meter distancing between colleagues and individuals is not possible, other measures should be implemented like such as self-monitoring of personal health and supervision by Infection Prevention and Control or Occupational Health and Safety staff in the workplace.\nFalse \n|\nAs restrictions across Saskatchewan are lifted, what are some things the Government of Saskatchewan and Chief Medical Health Officer, Dr. Saqib Shahab will be looking for?\nHow controlled transmission of the virus is and the capacity of the health system to isolate, treat every case and do trace contacting/testing \nMinimization of outbreak risks, including in health care facilities \nEfficacy of established preventative measures in workplaces, schools and other essential gathering places \nRisk of importing the virus from outside the province can me properly managed and mitigated \nThe community as a whole and its many stakeholders are educated, engaged and empowered to adjust to the new realities brought about by Covid-19\nAll of the above\nNone of the above \n|\nFill in the blank: Colour of Poverty \u2013 Colour of Change (COP-COC) is calling on the Canadian government to include and address _____ _____ ____ to the Covid-19 reconstruction plan.\nCurrent, Immigrant, Bias \nWhite, privilege, mentality \nSystemic, racial, inequalities \nSystemic, Covid-19, prejudices \n|\nColour of Poverty \u2013 Colour of Change (COP-COC) created a Reconstruction and Reset Plan to address the racial inequalities in Canada which have been further exposed/exasperated due to Covid-19. This plan includes which 8 areas of interest?  \nWhite privilege prevention, hostility, prejudice, racism, housing, education, Indigenous relations, policies, and practices \nAnti-racism, data collection, employment equity, health equity, poverty reduction and housing, gender equality, immigration, and justice \nSocial justice, racial equality, race relations, immigration, entrepreneurship, virtual bullying, healthy & safety, Covid-19 testing \nRacism doesn\u2019t exist in Canada therefore no plan is required or needed".split("|").forEach((function(t,n){var i="",o=t.split("\n");i+='Questions(\n        id: "'+n+'",\n        question: "'+o[1]+'",\n        answer: "",\n        options: [';for(var a=[],r=2;r<o.length;r++)o[r].length>0&&a.push('"'+o[r]+'"');i+=a.join(","),e+=i+="]),"})),e+="])",console.log(e)},e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=d.Jb({type:e,selectors:[["app-dashboard"]],decls:7,vars:4,consts:[[1,"main-content"],[1,"container-fluid"],["class","row",4,"ngIf"],["class","row","id","notification",4,"ngIf"],[4,"ngIf"],[1,"row"],[1,"col-lg-3","col-md-6","col-sm-6"],[1,"card","card-stats"],[1,"card-header","card-header-info","card-header-icon"],[1,"card-icon"],[1,"material-icons"],[1,"card-category"],[1,"card-title"],[1,"card-footer"],[1,"stats"],["href","/crm"],[1,"card-header","card-header-danger","card-header-icon"],[1,"card-header","card-header-warning","card-header-icon"],[1,"card-header","card-header-success","card-header-icon"],[1,"material-icons","text-danger"],["href","javascript:void(0)",3,"routerLink"],["id","notification",1,"row"],[1,"col-lg-6","col-md-12"],[1,"card"],[1,"card-header","card-header-tabs","card-header-rose"],[1,"nav-tabs-navigation"],[1,"nav-tabs-wrapper"],[1,"nav-tabs-title"],[1,"card-body"],[1,"tab-content"],["id","profile",1,"tab-pane","active"],[1,"table"],[4,"ngFor","ngForOf"],[2,"width","100%"],[1,"td-actions","text-right"],["mat-raised-button","","type","button","matTooltip","Mark As Read",1,"btn","btn-primary","btn-link","btn-sm",3,"matTooltipPosition","click"]],template:function(e,t){1&e&&(d.Vb(0,"div",0),d.Vb(1,"div",1),d.Lc(2,W,65,4,"div",2),d.Lc(3,Q,17,3,"div",2),d.Lc(4,R,14,2,"div",3),d.Lc(5,z,1,0,"app-technician-dashboard",4),d.Qb(6,"div"),d.Ub(),d.Ub()),2&e&&(d.Cb(2),d.qc("ngIf","admin"===t.user_type),d.Cb(1),d.qc("ngIf","admin"===t.user_type),d.Cb(1),d.qc("ngIf","admin"===t.user_type),d.Cb(1),d.qc("ngIf","technician"===t.user_type))},directives:[o.m,i.f,o.l,u.b,b.a,F],encapsulation:2}),e}()}]}],G=function(){function e(){}return e.\u0275mod=d.Nb({type:e}),e.\u0275inj=d.Mb({factory:function(t){return new(t||e)},imports:[[o.c,i.g.forChild(D),a.l,r.a,s.b]]}),e}()}}]);