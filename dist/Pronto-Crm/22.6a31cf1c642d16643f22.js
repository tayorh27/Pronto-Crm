(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{LzQz:function(e,t,i){"use strict";i.r(t),i.d(t,"SettingsModule",(function(){return G}));var n=i("tyNb"),c=i("ofXK"),o=i("3Pt+"),s=i("ZAI4"),a=i("1kSV"),l=i("P9ut"),b=i("4WDQ"),r=i("Wcq6"),d=(i("5x/H"),i("PSD3")),u=i.n(d),f=i("QebF"),p=i("WONP"),h=i("fXoL"),v=i("bTqV"),m=i("kmnG"),g=i("d3UM"),U=i("FKr1"),V=i("qFsG"),C=["role"],y=["user"];function k(e,t){if(1&e){var i=h.Wb();h.Vb(0,"td",18),h.Vb(1,"button",28),h.gc("click",(function(){h.Cc(i);var e=h.kc().$implicit;return h.kc(4).editRole(e)})),h.Vb(2,"i",16),h.Nc(3,"edit"),h.Ub(),h.Ub(),h.Vb(4,"button",29),h.gc("click",(function(){h.Cc(i);var e=h.kc().$implicit;return h.kc(4).deleteRole(e[1],e[2])})),h.Vb(5,"i",16),h.Nc(6,"close"),h.Ub(),h.Ub(),h.Ub()}if(2&e){var n=h.kc().$implicit;h.Cb(1),h.Fb("btn btn-success ",n[4],""),h.Cb(3),h.Fb("btn btn-danger ",n[4],"")}}function R(e,t){if(1&e&&(h.Vb(0,"tr"),h.Vb(1,"td",24),h.Nc(2),h.Ub(),h.Vb(3,"td"),h.Nc(4),h.Ub(),h.Vb(5,"td"),h.Nc(6),h.Ub(),h.Lc(7,k,7,6,"td",27),h.Ub()),2&e){var i=t.$implicit;h.Cb(2),h.Oc(i[0]),h.Cb(2),h.Oc(i[2]),h.Cb(2),h.Oc(i[3]),h.Cb(1),h.qc("ngIf","Administrator"!=i[2])}}function w(e,t){if(1&e&&(h.Vb(0,"div",22),h.Vb(1,"table",23),h.Vb(2,"thead"),h.Vb(3,"tr"),h.Vb(4,"th",24),h.Nc(5),h.Ub(),h.Vb(6,"th"),h.Nc(7),h.Ub(),h.Vb(8,"th"),h.Nc(9),h.Ub(),h.Vb(10,"th",25),h.Nc(11),h.Ub(),h.Ub(),h.Ub(),h.Vb(12,"tbody"),h.Lc(13,R,8,4,"tr",26),h.Ub(),h.Ub(),h.Ub()),2&e){var i=h.kc(3);h.Cb(5),h.Oc(i.tableData1.headerRow[0]),h.Cb(2),h.Oc(i.tableData1.headerRow[1]),h.Cb(2),h.Oc(i.tableData1.headerRow[2]),h.Cb(2),h.Oc(i.tableData1.headerRow[3]),h.Cb(2),h.qc("ngForOf",i.tableData1.dataRows)}}function N(e,t){if(1&e){var i=h.Wb();h.Vb(0,"div",12),h.Vb(1,"div",13),h.Vb(2,"div",14),h.Vb(3,"div",15),h.Vb(4,"i",16),h.Nc(5,"assignment"),h.Ub(),h.Ub(),h.Vb(6,"h4",17),h.Nc(7,"User Roles"),h.Ub(),h.Ub(),h.Vb(8,"div",18),h.Vb(9,"button",19),h.gc("click",(function(){return h.Cc(i),h.kc(2).addRole()})),h.Vb(10,"i",16),h.Nc(11,"add"),h.Ub(),h.Ub(),h.Ub(),h.Vb(12,"div",20),h.Lc(13,w,14,5,"div",21),h.Ub(),h.Ub(),h.Ub()}if(2&e){var n=h.kc(2);h.Cb(13),h.qc("ngIf",n.tableData1)}}function A(e,t){1&e&&(h.Vb(0,"ngb-tab",11),h.Lc(1,N,14,1,"ng-template",8),h.Ub())}function _(e,t){if(1&e){var i=h.Wb();h.Vb(0,"button",29),h.gc("click",(function(){h.Cc(i);var e=h.kc(2).$implicit;return h.kc(4).deleteUser(e)})),h.Vb(1,"i",16),h.Nc(2,"close"),h.Ub(),h.Ub()}if(2&e){var n=h.kc(2).$implicit;h.Fb("btn btn-danger ",n[9],"")}}function L(e,t){if(1&e){var i=h.Wb();h.Vb(0,"td",18),h.Vb(1,"button",28),h.gc("click",(function(){h.Cc(i);var e=h.kc().$implicit;return h.kc(4).editUser(e)})),h.Vb(2,"i",16),h.Nc(3,"edit"),h.Ub(),h.Ub(),h.Lc(4,_,3,3,"button",36),h.Ub()}if(2&e){var n=h.kc().$implicit,c=h.kc(4);h.Cb(1),h.Fb("btn btn-success ",n[9],""),h.Cb(3),h.qc("ngIf","Administrator"===c._role)}}function M(e,t){if(1&e&&(h.Vb(0,"tr"),h.Vb(1,"td",24),h.Nc(2),h.Ub(),h.Vb(3,"td"),h.Vb(4,"div",33),h.Vb(5,"div",34),h.Qb(6,"img",35),h.Ub(),h.Ub(),h.Ub(),h.Vb(7,"td"),h.Nc(8),h.Ub(),h.Vb(9,"td"),h.Nc(10),h.Ub(),h.Vb(11,"td"),h.Nc(12),h.Ub(),h.Vb(13,"td"),h.Nc(14),h.Ub(),h.Vb(15,"td",25),h.Nc(16),h.Ub(),h.Lc(17,L,5,4,"td",27),h.Ub()),2&e){var i=t.$implicit;h.Cb(2),h.Oc(i[0]),h.Cb(4),h.rc("src",i[1],h.Ec),h.Cb(2),h.Oc(i[3]),h.Cb(2),h.Oc(i[4]),h.Cb(2),h.Oc(i[5]),h.Cb(2),h.Oc(i[6]),h.Cb(2),h.Oc(i[8]),h.Cb(1),h.qc("ngIf","Administrator"!=i[6])}}function S(e,t){if(1&e&&(h.Vb(0,"div",22),h.Vb(1,"table",23),h.Vb(2,"thead"),h.Vb(3,"tr"),h.Vb(4,"th",24),h.Nc(5),h.Ub(),h.Vb(6,"th"),h.Nc(7),h.Ub(),h.Vb(8,"th"),h.Nc(9),h.Ub(),h.Vb(10,"th"),h.Nc(11),h.Ub(),h.Vb(12,"th"),h.Nc(13),h.Ub(),h.Vb(14,"th"),h.Nc(15),h.Ub(),h.Vb(16,"th",25),h.Nc(17),h.Ub(),h.Vb(18,"th",25),h.Nc(19),h.Ub(),h.Ub(),h.Ub(),h.Vb(20,"tbody"),h.Lc(21,M,18,8,"tr",26),h.Ub(),h.Ub(),h.Ub()),2&e){var i=h.kc(3);h.Cb(5),h.Oc(i.tableData2.headerRow[0]),h.Cb(2),h.Oc(i.tableData2.headerRow[1]),h.Cb(2),h.Oc(i.tableData2.headerRow[2]),h.Cb(2),h.Oc(i.tableData2.headerRow[3]),h.Cb(2),h.Oc(i.tableData2.headerRow[4]),h.Cb(2),h.Oc(i.tableData2.headerRow[5]),h.Cb(2),h.Oc(i.tableData2.headerRow[6]),h.Cb(2),h.Oc(i.tableData2.headerRow[7]),h.Cb(2),h.qc("ngForOf",i.tableData2.dataRows)}}function D(e,t){if(1&e){var i=h.Wb();h.Vb(0,"div",12),h.Vb(1,"div",13),h.Vb(2,"div",14),h.Vb(3,"div",15),h.Vb(4,"i",16),h.Nc(5,"assignment"),h.Ub(),h.Ub(),h.Vb(6,"h4",17),h.Nc(7,"Admin Users"),h.Ub(),h.Ub(),h.Vb(8,"div",18),h.Vb(9,"button",32),h.gc("click",(function(){return h.Cc(i),h.kc(2).addUser()})),h.Vb(10,"i",16),h.Nc(11,"add"),h.Ub(),h.Ub(),h.Ub(),h.Vb(12,"div",20),h.Lc(13,S,22,9,"div",21),h.Ub(),h.Ub(),h.Ub()}if(2&e){var n=h.kc(2);h.Cb(13),h.qc("ngIf",n.tableData2)}}function q(e,t){if(1&e&&(h.Vb(0,"mat-option",58),h.Nc(1),h.Ub()),2&e){var i=t.$implicit;h.qc("value",i.name),h.Cb(1),h.Pc(" ",i.name," ")}}var I=function(e){return{"mat-focused":e}};function O(e,t){if(1&e){var i=h.Wb();h.Vb(0,"div",37),h.Vb(1,"div",2),h.Vb(2,"div",38),h.Vb(3,"div",39),h.Vb(4,"h2",40),h.Nc(5,"Register"),h.Ub(),h.Vb(6,"div",20),h.Vb(7,"div",2),h.Vb(8,"div",41),h.Vb(9,"form",42),h.Vb(10,"div",43),h.Vb(11,"div",44),h.Vb(12,"div",45),h.Vb(13,"span",46),h.Vb(14,"i",16),h.Nc(15,"face"),h.Ub(),h.Ub(),h.Ub(),h.Qb(16,"input",47),h.Ub(),h.Ub(),h.Vb(17,"div",43),h.Vb(18,"div",44),h.Vb(19,"div",45),h.Vb(20,"span",46),h.Vb(21,"i",16),h.Nc(22,"mail"),h.Ub(),h.Ub(),h.Ub(),h.Qb(23,"input",48),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Vb(24,"div",49),h.Vb(25,"form",42),h.Vb(26,"div",43),h.Vb(27,"div",44),h.Vb(28,"div",45),h.Vb(29,"span",46),h.Vb(30,"i",16),h.Nc(31,"login"),h.Ub(),h.Ub(),h.Ub(),h.Qb(32,"input",50),h.Ub(),h.Ub(),h.Vb(33,"div",43),h.Vb(34,"div",44),h.Vb(35,"mat-form-field",51),h.Vb(36,"mat-select",52),h.gc("ngModelChange",(function(e){return h.Cc(i),h.kc(2).accountRole=e})),h.Lc(37,q,2,2,"mat-option",53),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Vb(38,"div",43),h.Vb(39,"div",44),h.Vb(40,"div",45),h.Vb(41,"span",46),h.Vb(42,"i",16),h.Nc(43,"call"),h.Ub(),h.Ub(),h.Ub(),h.Qb(44,"input",54),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Vb(45,"div",41),h.Vb(46,"form",42),h.Vb(47,"div",43),h.Vb(48,"div",44),h.Vb(49,"div",45),h.Vb(50,"span",46),h.Vb(51,"i",16),h.Nc(52,"fingerprint"),h.Ub(),h.Ub(),h.Ub(),h.Qb(53,"input",55),h.Ub(),h.Ub(),h.Vb(54,"div",24),h.Vb(55,"a",56),h.gc("click",(function(){return h.Cc(i),h.kc(2).registerUser()})),h.Nc(56,"Add User"),h.Ub(),h.Vb(57,"a",57),h.gc("click",(function(){return h.Cc(i),h.kc(2).cancelAddUser()})),h.Nc(58,"Cancel"),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Ub()}if(2&e){var n=h.kc(2);h.Cb(35),h.qc("ngClass",h.uc(3,I,!1===n.focus1)),h.Cb(1),h.qc("ngModel",n.accountRole),h.Cb(1),h.qc("ngForOf",n.roles)}}function x(e,t){if(1&e&&(h.Lc(0,D,14,1,"div",30),h.Vb(1,"div"),h.Lc(2,O,59,5,"div",31),h.Ub()),2&e){var i=h.kc();h.qc("ngIf",i.display_users),h.Cb(2),h.qc("ngIf",!i.display_users)}}function P(e,t){1&e&&(h.Vb(0,"h4",17),h.Nc(1,"Add a new role"),h.Ub())}function B(e,t){1&e&&(h.Vb(0,"h4",17),h.Nc(1,"Update role"),h.Ub())}function E(e,t){if(1&e&&(h.Vb(0,"mat-option",58),h.Nc(1),h.Ub()),2&e){var i=t.$implicit;h.qc("value",i.value),h.Cb(1),h.Pc(" ",i.viewValue," ")}}function T(e,t){1&e&&(h.Vb(0,"div",71),h.jc(),h.Vb(1,"svg",72),h.Qb(2,"circle",73),h.Ub(),h.Ub())}function $(e,t){if(1&e){var i=h.Wb();h.Vb(0,"button",74),h.gc("click",(function(){return h.Cc(i),h.kc(2).roleButtonAction()})),h.Nc(1,"Add"),h.Ub()}}function F(e,t){if(1&e){var i=h.Wb();h.Vb(0,"button",74),h.gc("click",(function(){return h.Cc(i),h.kc(2).roleButtonAction()})),h.Nc(1,"Update"),h.Ub()}}function W(e,t){if(1&e){var i=h.Wb();h.Vb(0,"div",59),h.Vb(1,"div",60),h.Vb(2,"div",12),h.Vb(3,"div",13),h.Vb(4,"div",14),h.Vb(5,"div",15),h.Vb(6,"i",16),h.Nc(7,"mail_outline"),h.Ub(),h.Ub(),h.Lc(8,P,2,0,"h4",61),h.Lc(9,B,2,0,"h4",61),h.Ub(),h.Vb(10,"div",20),h.Vb(11,"form",62),h.Vb(12,"mat-form-field",63),h.Qb(13,"input",64),h.Ub(),h.Vb(14,"mat-form-field",51),h.Vb(15,"mat-select",65),h.gc("ngModelChange",(function(e){return h.Cc(i),h.kc().currentLevel=e})),h.Lc(16,E,2,2,"mat-option",53),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Vb(17,"div",66),h.Lc(18,T,3,0,"div",67),h.Lc(19,$,2,0,"button",68),h.Lc(20,F,2,0,"button",68),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Vb(21,"div",69),h.Vb(22,"button",70),h.gc("click",(function(){return(0,t.close)("Close click")})),h.Nc(23,"Close"),h.Ub(),h.Ub(),h.Ub()}if(2&e){var n=h.kc();h.Cb(8),h.qc("ngIf",n.isAddRole),h.Cb(1),h.qc("ngIf",!n.isAddRole),h.Cb(4),h.rc("value",n.currentRole[2]),h.Cb(1),h.qc("ngClass",h.uc(9,I,!1===n.focus1)),h.Cb(1),h.qc("ngModel",n.currentLevel),h.Cb(1),h.qc("ngForOf",n.levels),h.Cb(2),h.qc("ngIf",n.button_pressed),h.Cb(1),h.qc("ngIf",n.isAddRole),h.Cb(1),h.qc("ngIf",!n.isAddRole)}}function Q(e,t){if(1&e&&(h.Vb(0,"mat-option",58),h.Nc(1),h.Ub()),2&e){var i=t.$implicit;h.qc("value",i.name),h.Cb(1),h.Pc(" ",i.name," ")}}function J(e,t){if(1&e&&(h.Vb(0,"mat-option",58),h.Nc(1),h.Ub()),2&e){var i=t.$implicit;h.qc("value",i.value),h.Cb(1),h.Pc(" ",i.viewValue," ")}}function j(e,t){if(1&e){var i=h.Wb();h.Vb(0,"div",59),h.Vb(1,"div",60),h.Vb(2,"div",12),h.Vb(3,"div",13),h.Vb(4,"div",14),h.Vb(5,"div",15),h.Vb(6,"i",16),h.Nc(7,"mail_outline"),h.Ub(),h.Ub(),h.Vb(8,"h4",17),h.Nc(9,"Update User"),h.Ub(),h.Ub(),h.Vb(10,"div",20),h.Vb(11,"form",62),h.Vb(12,"mat-form-field",51),h.Vb(13,"mat-select",52),h.gc("ngModelChange",(function(e){return h.Cc(i),h.kc().accountRole=e})),h.Lc(14,Q,2,2,"mat-option",53),h.Ub(),h.Ub(),h.Vb(15,"mat-form-field",51),h.Vb(16,"mat-select",75),h.gc("ngModelChange",(function(e){return h.Cc(i),h.kc().blocked_status=e})),h.Lc(17,J,2,2,"mat-option",53),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Vb(18,"div",66),h.Vb(19,"button",74),h.gc("click",(function(){return h.Cc(i),h.kc().userButtonAction()})),h.Nc(20,"Update"),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Vb(21,"div",69),h.Vb(22,"button",70),h.gc("click",(function(){return(0,t.close)("Close click")})),h.Nc(23,"Close"),h.Ub(),h.Ub(),h.Ub()}if(2&e){var n=h.kc();h.Cb(12),h.qc("ngClass",h.uc(6,I,!1===n.focus1)),h.Cb(1),h.qc("ngModel",n.accountRole),h.Cb(1),h.qc("ngForOf",n.roles),h.Cb(1),h.qc("ngClass",h.uc(8,I,!1===n.focus1)),h.Cb(1),h.qc("ngModel",n.blocked_status),h.Cb(1),h.qc("ngForOf",n.blocks_data)}}var z=[{path:"",children:[{path:"",component:function(){function e(e,t,i,n){this.modalService=e,this.router=t,this.previewProgressSpinner=i,this.cdr=n,this.services=new l.a,this.roles=[],this.config=new b.a,this.data=[],this.data2=[],this.closeResult="",this.isAddRole=!0,this.currentRole=[],this.accountRole="",this.currentUserEmail="",this.display_users=!0,this.button_pressed=!1,this._role="",this.currentLevel=[],this.blocked_status="",this.blocks_data=[{value:"false",viewValue:"False"},{value:"true",viewValue:"True"}],this.selectTheme="primary",this.levels=[{value:"Customer",viewValue:"Customer"},{value:"Skill-Sets",viewValue:"Skill-Sets"},{value:"Technician",viewValue:"Technician"},{value:"New-Ticket",viewValue:"New-Ticket"},{value:"Jobs",viewValue:"Jobs"},{value:"App-Settings",viewValue:"App-Settings"},{value:"Assigned-Jobs",viewValue:"Assigned-Jobs"},{value:"Logs",viewValue:"Logs"}],this.tableData1={headerRow:["#","Name","Access Levels","Actions"],dataRows:this.data},this.tableData2={headerRow:["#","Dp","Name","Email Address","Position","Role","Blocked","Actions"],dataRows:this.data2}}return e.prototype.getRoles=function(){var e=this;r.firestore().collection("roles").onSnapshot((function(t){e.data=[],e.roles=[];var i=0;t.forEach((function(t){var n=t.data();e.roles.push(n),e.data.push([""+(i+1),n.id,n.name,n.access_levels,"btn-link"]),i+=1})),e.tableData1={headerRow:["#","Name","Access Levels","Actions"],dataRows:e.data}}))},e.prototype.getUsers=function(){var e=this;r.firestore().collection("users").where("user_type","==","admin").onSnapshot((function(t){e.data2=[];var i=0;t.forEach((function(t){var n=t.data();e.data2.push([""+(i+1),n.image,n.id,n.name,n.email,n.position,n.role,n.access_levels,""+n.blocked,"btn-link"]),i+=1})),e.tableData2={headerRow:["#","Dp","Name","Email Address","Position","Role","Blocked","Actions"],dataRows:e.data2}}))},e.prototype.ngOnInit=function(){var e=this,t=localStorage.getItem("email");this.services.getUserData(t).then((function(t){e._role=t.role,"Administrator"===t.role?(e.getRoles(),e.getUsers()):e.getUsers()}))},e.prototype.open=function(e,t,i){var n=this;"sm"===i&&"modal_mini"===t?this.modalService.open(e,{windowClass:"modal-mini",size:"sm",centered:!0}).result.then((function(e){n.closeResult="Closed with: $result"}),(function(e){n.closeResult="Dismissed $this.getDismissReason(reason)"})):""===i&&"Notification"===t?this.modalService.open(e,{windowClass:"modal-danger",centered:!0}).result.then((function(e){n.closeResult="Closed with: $result"}),(function(e){n.closeResult="Dismissed $this.getDismissReason(reason)"})):this.modalService.open(e,{centered:!0}).result.then((function(e){n.closeResult="Closed with: $result"}),(function(e){n.closeResult="Dismissed $this.getDismissReason(reason)"}))},e.prototype.addUser=function(){this.display_users=!1},e.prototype.cancelAddUser=function(){this.display_users=!0},e.prototype.registerUser=function(){var e=this,t=document.getElementById("account_name").value,i=document.getElementById("email").value,n=document.getElementById("position").value,c=document.getElementById("phone").value,o=document.getElementById("sip_exten").value,s=this.accountRole;if(""!=t&&""!=i&&""!=n&&""!=c&&""!=this.accountRole&&""!==o)if(c.startsWith("+234")){var a=this.roles.filter((function(e,t,i){return e.name==s}));this.previewProgressSpinner.open({hasBackdrop:!0},p.a);var l={id:r.database().ref().push().key,access_levels:a[0].access_levels,blocked:!1,email:i.toLowerCase(),image:"./assets/img/default-avatar.png",name:t,user_position:n,SIPexten:o,msgID:[],phone:c,role:this.accountRole,user_type:"admin"};r.firestore().collection("users").doc(i.toLowerCase()).set(l).then((function(t){e.previewProgressSpinner.close(),e.config.displayMessage("User successfully created.",!0),e.display_users=!0,e.accountRole=""})).catch((function(t){e.previewProgressSpinner.close(),e.config.displayMessage(""+t,!1)}))}else this.config.displayMessage("Please input correct address. Must start with +234",!1);else this.config.displayMessage("Please enter all fields",!1)},e.prototype.editUser=function(e){var t=this;"Administrator"!=e[6]?(this.currentUserEmail=e[4],this.blocked_status=e[8],this.accountRole=e[6],this.cdr.detectChanges(),setTimeout((function(){t.open(t.userContainer,"","")}))):this.config.displayMessage("This user can't be edited",!1)},e.prototype.userButtonAction=function(){var e=this;if(""!=this.accountRole&&""!=this.blocked_status){this.previewProgressSpinner.open({hasBackdrop:!0},p.a);var t=this.accountRole,i=this.roles.filter((function(e,i,n){return e.name==t}));r.firestore().collection("users").doc(this.currentUserEmail).update({blocked:"true"==this.blocked_status,role:t,access_levels:i[0].access_levels}).then((function(t){e.previewProgressSpinner.close(),e.modalService.dismissAll(),e.config.displayMessage("User successfully updated.",!0),e.accountRole="",e.blocked_status="",e.currentUserEmail=""})).catch((function(t){e.previewProgressSpinner.close(),e.config.displayMessage(""+t,!1)}))}else this.config.displayMessage("All fields must be filled",!1)},e.prototype.deleteUser=function(e){var t=this;if("Administrator"!=e[6]){var i=""+e[4];u()({title:"Delete Alert",text:"Are you sure about deleting this user?",type:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then((function(e){e.value?r.firestore().collection("users").doc(i).delete().then((function(e){t.config.displayMessage("Successfully deleted",!0)})).catch((function(e){t.config.displayMessage(""+e,!1)})):u()({title:"Cancelled",text:"Deletion not successful",type:"error",confirmButtonClass:"btn btn-info",buttonsStyling:!1}).catch(u.a.noop)}))}else this.config.displayMessage("This role can't be deleted",!1)},e.prototype.editRole=function(e){var t=this;"Administrator"!=e[2]?(this.isAddRole=!1,this.currentRole=e,this.currentLevel=e[3].split(","),this.cdr.detectChanges(),setTimeout((function(){t.open(t.roleContainer,"","")}))):this.config.displayMessage("This role can't be edited",!1)},e.prototype.deleteRole=function(e,t){var i=this;"Administrator"!=t?u()({title:"Delete Alert",text:"Are you sure about deleting this role?",type:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then((function(t){t.value?r.firestore().collection("roles").doc(e).delete().then((function(e){i.config.displayMessage("Successfully deleted",!0)})).catch((function(e){i.config.displayMessage(""+e,!1)})):u()({title:"Cancelled",text:"Deletion not successful",type:"error",confirmButtonClass:"btn btn-info",buttonsStyling:!1}).catch(u.a.noop)})):this.config.displayMessage("This role can't be deleted",!1)},e.prototype.addRole=function(){var e=this;this.isAddRole=!0,this.currentRole=[],this.currentLevel=[],this.cdr.detectChanges(),setTimeout((function(){e.open(e.roleContainer,"","")}))},e.prototype.roleButtonAction=function(){var e=this,t=document.getElementById("role_name").value;if(""!=t)if(0!=this.currentLevel.length)if(this.isAddRole){this.button_pressed=!0;var i={name:t,id:n=r.database().ref().push().key,access_levels:this.currentLevel.join(",")};r.firestore().collection("roles").doc(n).set(i).then((function(t){e.modalService.dismissAll(),e.button_pressed=!1,e.isAddRole=!0,e.currentLevel=[],e.config.displayMessage("Successfully created",!0)})).catch((function(t){e.config.displayMessage(""+t,!1)}))}else{var n;this.button_pressed=!0,i={name:t,id:n=this.currentRole[1],access_levels:this.currentLevel.join(",")},r.firestore().collection("roles").doc(n).update(i).then((function(t){e.modalService.dismissAll(),e.button_pressed=!1,e.isAddRole=!0,e.currentLevel=[],e.config.displayMessage("Successfully updated",!0)})).catch((function(t){e.config.displayMessage(""+t,!1)}))}else this.config.displayMessage("Please select one or two access levels for this role",!1);else this.config.displayMessage("Please enter the name of this role",!1)},e.\u0275fac=function(t){return new(t||e)(h.Pb(a.a),h.Pb(n.d),h.Pb(f.b),h.Pb(h.h))},e.\u0275cmp=h.Jb({type:e,selectors:[["app-settings"]],viewQuery:function(e,t){var i;1&e&&(h.Rc(C,!0),h.Rc(y,!0)),2&e&&(h.xc(i=h.hc())&&(t.roleContainer=i.first),h.xc(i=h.hc())&&(t.userContainer=i.first))},decls:14,vars:2,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-lg-12"],[1,"h2"],["type","pills",1,"custom-tab-content","flex-column","flex-md-row",3,"justify"],["title","USER ROLES",4,"ngIf"],["title","ADMIN USERS"],["ngbTabContent",""],["role",""],["user",""],["title","USER ROLES"],[1,"col-md-12"],[1,"card"],[1,"card-header","card-header-rose","card-header-icon"],[1,"card-icon"],[1,"material-icons"],[1,"card-title"],[1,"td-actions","text-right"],["mat-raised-button","","type","button","ngbAutofocus","",1,"btn","btn-primary","btn-round",3,"click"],[1,"card-body"],["class","table-responsive",4,"ngIf"],[1,"table-responsive"],[1,"table"],[1,"text-center"],[1,"text-right"],[4,"ngFor","ngForOf"],["class","td-actions text-right",4,"ngIf"],["mat-raised-button","","type","button","data-toggle","tooltip","title","edit","data-placement","bottom",3,"click"],["mat-raised-button","","type","button","data-toggle","tooltip","title","delete","data-placement","bottom",3,"click"],["class","col-md-12",4,"ngIf"],["class","container",4,"ngIf"],["mat-raised-button","","type","button",1,"btn","btn-primary","btn-round",3,"click"],[1,"user"],[1,"photo"],[3,"src"],["mat-raised-button","","type","button","data-toggle","tooltip","title","delete","data-placement","bottom",3,"class","click",4,"ngIf"],[1,"container"],[1,"col-md-12","ml-auto","mr-auto"],[1,"card","card-signup"],[1,"card-title","text-center"],[1,"col-md-5","ml-auto"],["method","","action","",1,"form"],[1,"form-group","has-default"],[1,"input-group"],[1,"input-group-prepend"],[1,"input-group-text"],["type","text","placeholder","Account Name","id","account_name",1,"form-control"],["type","email","placeholder","Email Address","id","email",1,"form-control"],[1,"col-md-5","mr-auto"],["type","text","placeholder","Position","id","position",1,"form-control"],[3,"ngClass"],["focused","true","placeholder","Access Role","name","Roles","ariaLabel","roles[0]",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["type","tel","value","+234","placeholder","Phone Number","id","phone",1,"form-control"],["type","text","placeholder","Account SIPExten","id","sip_exten",1,"form-control"],[1,"btn","btn-fill","btn-primary",3,"click"],[1,"btn","btn-fill","btn-danger",3,"click"],[3,"value"],[1,"modal-content"],[1,"modal-body"],["class","card-title",4,"ngIf"],["method","#","action","#"],[1,"example-full-width"],["matInput","","placeholder","Role Name","name","role_nm","id","role_name","type","text",3,"value"],["focused","true","multiple","","placeholder","Access Levels","name","Levels","ariaLabel","levels[0]",3,"ngModel","ngModelChange"],[1,"card-footer"],["class","loader",4,"ngIf"],["mat-raised-button","","type","submit","class","btn btn-fill btn-rose",3,"click",4,"ngIf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-secondary",3,"click"],[1,"loader"],["viewBox","25 25 50 50",1,"circular"],["cx","50","cy","50","r","20","fill","none","stroke-width","2","stroke-miterlimit","10",1,"path"],["mat-raised-button","","type","submit",1,"btn","btn-fill","btn-rose",3,"click"],["placeholder","Blocked Status","name","Blocked","ariaLabel","blocks_data[0]",3,"ngModel","ngModelChange"]],template:function(e,t){1&e&&(h.Vb(0,"div",0),h.Vb(1,"div",1),h.Vb(2,"div",2),h.Vb(3,"div",3),h.Vb(4,"p",4),h.Nc(5,"Administrative Settings"),h.Ub(),h.Vb(6,"ngb-tabset",5),h.Lc(7,A,2,0,"ngb-tab",6),h.Vb(8,"ngb-tab",7),h.Lc(9,x,3,2,"ng-template",8),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Ub(),h.Lc(10,W,24,11,"ng-template",null,9,h.Mc),h.Lc(12,j,24,10,"ng-template",null,10,h.Mc)),2&e&&(h.Cb(6),h.qc("justify","center"),h.Cb(1),h.qc("ngIf","Administrator"===t._role))},directives:[a.e,c.m,a.c,a.d,v.b,c.l,o.A,o.r,o.s,m.c,c.k,g.a,o.q,o.t,U.n,V.b],styles:[".user[_ngcontent-%COMP%]   .photo[_ngcontent-%COMP%]{width:34px;height:34px;overflow:hidden;z-index:5;border-radius:50%}"]}),e}()}]}],G=function(){function e(){}return e.\u0275mod=h.Nb({type:e}),e.\u0275inj=h.Mb({factory:function(t){return new(t||e)},imports:[[n.g.forChild(z),c.c,o.l,s.b,o.x,a.b]]}),e}()}}]);