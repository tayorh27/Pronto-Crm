(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{GAj2:function(t,e,o){"use strict";o.r(e),o.d(e,"AddJobModule",(function(){return q}));var a=o("tyNb"),i=o("ofXK"),b=o("3Pt+"),c=o("OsiS"),n=o("ZAI4"),r=o("Wcq6"),s=(o("5x/H"),o("Zs65"),o("EVdn")),d=(o("FlOX"),o("e1J8"),o("4WDQ")),l=o("PSD3"),u=o.n(l),f=o("P9ut"),g=o("fXoL"),h=o("bTqV"),p=o("1kSV"),m=function(t,e,o,a){return new(o||(o=Promise))((function(i,b){function c(t){try{r(a.next(t))}catch(e){b(e)}}function n(t){try{r(a.throw(t))}catch(e){b(e)}}function r(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(c,n)}r((a=a.apply(t,e||[])).next())}))},V=function(t,e){var o,a,i,b,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return b={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(b[Symbol.iterator]=function(){return this}),b;function n(b){return function(n){return function(b){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,a&&(i=2&b[0]?a.return:b[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,b[1])).done)return i;switch(a=0,i&&(b=[2&b[0],i.value]),b[0]){case 0:case 1:i=b;break;case 4:return c.label++,{value:b[1],done:!1};case 5:c.label++,a=b[1],b=[0];continue;case 7:b=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==b[0]&&2!==b[0])){c=0;continue}if(3===b[0]&&(!i||b[1]>i[0]&&b[1]<i[3])){c.label=b[1];break}if(6===b[0]&&c.label<i[1]){c.label=i[1],i=b;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(b);break}i[2]&&c.ops.pop(),c.trys.pop();continue}b=e.call(t,c)}catch(n){b=[6,n],a=0}finally{o=i=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([b,n])}}};function U(t,e){if(1&t){var o=g.Wb();g.Vb(0,"li"),g.Vb(1,"a",14),g.gc("click",(function(){g.Cc(o);var t=e.$implicit;return g.kc(2).displayJobsByStatus(t.name)})),g.Nc(2),g.Ub(),g.Ub()}if(2&t){var a=e.$implicit;g.Cb(2),g.Oc(a.name)}}function v(t,e){if(1&t){var o=g.Wb();g.Vb(0,"a",27),g.gc("click",(function(){g.Cc(o);var t=g.kc().$implicit;return g.kc(2).deleteJob(t)})),g.Vb(1,"i",8),g.Nc(2,"close"),g.Ub(),g.Ub()}}function y(t,e){if(1&t){var o=g.Wb();g.Vb(0,"tr"),g.Vb(1,"td"),g.Nc(2),g.Ub(),g.Vb(3,"td"),g.Nc(4),g.Ub(),g.Vb(5,"td"),g.Nc(6),g.Ub(),g.Qb(7,"td",22),g.Vb(8,"td"),g.Qb(9,"div",23),g.Nc(10),g.Ub(),g.Vb(11,"td"),g.Nc(12),g.Ub(),g.Vb(13,"td"),g.Nc(14),g.Ub(),g.Vb(15,"td"),g.Nc(16),g.Ub(),g.Vb(17,"td",21),g.Vb(18,"a",24),g.gc("click",(function(){g.Cc(o);var t=e.$implicit;return g.kc(2).reassignJob(t)})),g.Vb(19,"i",8),g.Nc(20,"refresh"),g.Ub(),g.Ub(),g.Vb(21,"a",25),g.gc("click",(function(){g.Cc(o);var t=e.$implicit;return g.kc(2).editJob(t)})),g.Vb(22,"i",8),g.Nc(23,"edit"),g.Ub(),g.Ub(),g.Lc(24,v,3,0,"a",26),g.Ub(),g.Ub()}if(2&t){var a=e.$implicit,i=g.kc(2);g.Cb(2),g.Oc(a[10]),g.Cb(2),g.Oc(a[1]),g.Cb(2),g.Oc(a[2]),g.Cb(1),g.qc("innerHTML",a[8],g.Dc),g.Cb(2),g.qc("ngStyle",i.getStyle(a[4])),g.Cb(1),g.Pc(" ",a[4]," "),g.Cb(2),g.Oc(a[5]),g.Cb(2),g.Oc(a[6]),g.Cb(2),g.Oc(a[7]),g.Cb(8),g.qc("ngIf","Administrator"===i.role||"SubAdmin"===i.role)}}function C(t,e){if(1&t){var o=g.Wb();g.Vb(0,"div",3),g.Vb(1,"div",4),g.Vb(2,"div",5),g.Vb(3,"div",6),g.Vb(4,"div",7),g.Vb(5,"i",8),g.Nc(6,"assignment"),g.Ub(),g.Ub(),g.Vb(7,"h4",9),g.Nc(8,"My Jobs"),g.Ub(),g.Vb(9,"div",10),g.Vb(10,"button",11),g.Vb(11,"i",8),g.Nc(12,"build"),g.Ub(),g.Vb(13,"span",12),g.Nc(14,"Toggle Job Status"),g.Ub(),g.Ub(),g.Vb(15,"ul",13),g.Vb(16,"li"),g.Vb(17,"a",14),g.gc("click",(function(){return g.Cc(o),g.kc().displayJobsByStatus("All")})),g.Nc(18,"All"),g.Ub(),g.Ub(),g.Lc(19,U,3,1,"li",15),g.Ub(),g.Ub(),g.Ub(),g.Vb(20,"div",16),g.Qb(21,"div",17),g.Vb(22,"div",18),g.Vb(23,"table",19),g.Vb(24,"thead"),g.Vb(25,"tr"),g.Vb(26,"th"),g.Nc(27),g.Ub(),g.Vb(28,"th"),g.Nc(29),g.Ub(),g.Vb(30,"th"),g.Nc(31),g.Ub(),g.Vb(32,"th"),g.Nc(33),g.Ub(),g.Vb(34,"th"),g.Nc(35),g.Ub(),g.Vb(36,"th"),g.Nc(37),g.Ub(),g.Vb(38,"th"),g.Nc(39),g.Ub(),g.Vb(40,"th"),g.Nc(41),g.Ub(),g.Vb(42,"th",20),g.Nc(43),g.Ub(),g.Ub(),g.Ub(),g.Vb(44,"tfoot"),g.Vb(45,"tr"),g.Vb(46,"th"),g.Nc(47),g.Ub(),g.Vb(48,"th"),g.Nc(49),g.Ub(),g.Vb(50,"th"),g.Nc(51),g.Ub(),g.Vb(52,"th"),g.Nc(53),g.Ub(),g.Vb(54,"th"),g.Nc(55),g.Ub(),g.Vb(56,"th"),g.Nc(57),g.Ub(),g.Vb(58,"th"),g.Nc(59),g.Ub(),g.Vb(60,"th"),g.Nc(61),g.Ub(),g.Vb(62,"th",21),g.Nc(63),g.Ub(),g.Ub(),g.Ub(),g.Vb(64,"tbody"),g.Lc(65,y,25,10,"tr",15),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub()}if(2&t){var a=g.kc();g.Cb(19),g.qc("ngForOf",a.statuses),g.Cb(8),g.Oc(a.dataTable.headerRow[8]),g.Cb(2),g.Oc(a.dataTable.headerRow[0]),g.Cb(2),g.Oc(a.dataTable.headerRow[1]),g.Cb(2),g.Oc(a.dataTable.headerRow[2]),g.Cb(2),g.Oc(a.dataTable.headerRow[3]),g.Cb(2),g.Oc(a.dataTable.headerRow[4]),g.Cb(2),g.Oc(a.dataTable.headerRow[5]),g.Cb(2),g.Oc(a.dataTable.headerRow[6]),g.Cb(2),g.Pc(" ",a.dataTable.headerRow[7]," "),g.Cb(4),g.Oc(a.dataTable.footerRow[8]),g.Cb(2),g.Oc(a.dataTable.footerRow[0]),g.Cb(2),g.Oc(a.dataTable.footerRow[1]),g.Cb(2),g.Oc(a.dataTable.footerRow[2]),g.Cb(2),g.Oc(a.dataTable.footerRow[3]),g.Cb(2),g.Oc(a.dataTable.footerRow[4]),g.Cb(2),g.Oc(a.dataTable.footerRow[5]),g.Cb(2),g.Oc(a.dataTable.footerRow[6]),g.Cb(2),g.Oc(a.dataTable.footerRow[7]),g.Cb(2),g.qc("ngForOf",a.dataTable.dataRows)}}function w(t,e){if(1&t){var o=g.Wb();g.Vb(0,"li"),g.Vb(1,"a",14),g.gc("click",(function(){g.Cc(o);var t=e.$implicit;return g.kc(3).updateStatus(t.name)})),g.Nc(2),g.Ub(),g.Ub()}if(2&t){var a=e.$implicit;g.Cb(2),g.Oc(a.name)}}var N=function(t){return{color:t}};function J(t,e){if(1&t){var o=g.Wb();g.Vb(0,"div",4),g.Vb(1,"button",33),g.gc("click",(function(){return g.Cc(o),g.kc(2).cancelViewJob()})),g.Nc(2," Cancel "),g.Ub(),g.Vb(3,"ul",34),g.Vb(4,"li",35),g.Vb(5,"div",36),g.Vb(6,"i",8),g.Nc(7,"work"),g.Ub(),g.Ub(),g.Vb(8,"div",37),g.Vb(9,"div",38),g.Vb(10,"span",39),g.Nc(11,"JOB REQUEST"),g.Ub(),g.Ub(),g.Vb(12,"div",40),g.Vb(13,"p"),g.Nc(14," Comment: "),g.Qb(15,"br"),g.Vb(16,"strong"),g.Nc(17),g.Ub(),g.Ub(),g.Qb(18,"br"),g.Vb(19,"p",41),g.Nc(20," Status: "),g.Qb(21,"br"),g.Vb(22,"strong"),g.Nc(23),g.Ub(),g.Ub(),g.Qb(24,"br"),g.Vb(25,"p"),g.Nc(26,"Request:"),g.Ub(),g.Qb(27,"div",22),g.Qb(28,"hr"),g.Vb(29,"div",10),g.Vb(30,"button",11),g.Vb(31,"i",8),g.Nc(32,"build"),g.Ub(),g.Vb(33,"span",12),g.Nc(34,"Update Job Status"),g.Ub(),g.Ub(),g.Vb(35,"ul",13),g.Lc(36,w,3,1,"li",15),g.Ub(),g.Ub(),g.Vb(37,"div",42),g.Vb(38,"button",43),g.gc("click",(function(){g.Cc(o);var t=g.kc(2);return t.reassignJob([t.selectedJob.id,"","",t.selectedJob.customer.email])})),g.Nc(39," Re-Assign Job "),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Vb(40,"li",35),g.Vb(41,"div",44),g.Vb(42,"i",8),g.Nc(43,"handyman"),g.Ub(),g.Ub(),g.Vb(44,"div",37),g.Vb(45,"div",38),g.Vb(46,"span",45),g.Nc(47,"TECHNICIAN INFO"),g.Ub(),g.Ub(),g.Vb(48,"div",40),g.Vb(49,"div",46),g.Vb(50,"div",47),g.Vb(51,"div",48),g.Vb(52,"a",49),g.Qb(53,"img",50),g.Ub(),g.Ub(),g.Vb(54,"div",16),g.Vb(55,"h6",51),g.Nc(56),g.Ub(),g.Vb(57,"h4",9),g.Nc(58),g.Ub(),g.Vb(59,"p",52),g.Nc(60),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Vb(61,"h6"),g.Qb(62,"i",53),g.Nc(63),g.Ub(),g.Ub(),g.Ub(),g.Vb(64,"li",35),g.Vb(65,"div",54),g.Vb(66,"i",8),g.Nc(67,"people"),g.Ub(),g.Ub(),g.Vb(68,"div",37),g.Vb(69,"div",38),g.Vb(70,"span",55),g.Nc(71,"CUSTOMER INFO"),g.Ub(),g.Ub(),g.Vb(72,"div",40),g.Vb(73,"div",46),g.Vb(74,"div",47),g.Vb(75,"div",48),g.Vb(76,"a",49),g.Qb(77,"img",56),g.Ub(),g.Ub(),g.Vb(78,"div",16),g.Vb(79,"h6",51),g.Nc(80),g.Ub(),g.Vb(81,"h4",9),g.Nc(82),g.Ub(),g.Vb(83,"p",52),g.Nc(84),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Vb(85,"h6"),g.Qb(86,"i",53),g.Nc(87),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Qb(88,"br"),g.Vb(89,"button",33),g.gc("click",(function(){return g.Cc(o),g.kc(2).cancelViewJob()})),g.Nc(90," Cancel "),g.Ub(),g.Ub()}if(2&t){var a=g.kc(2);g.Cb(17),g.Oc(a.selectedJob.note),g.Cb(2),g.qc("ngStyle",g.uc(15,N,a.getStatusColorByName(a.selectedJob.status))),g.Cb(4),g.Oc(a.selectedJob.status),g.Cb(4),g.qc("innerHTML",a.displayHTMLCategories(a.selectedJob.category),g.Dc),g.Cb(9),g.qc("ngForOf",a.statuses),g.Cb(17),g.rc("src",a.selectedJob.assigned_to.image,g.Ec),g.Cb(3),g.Pc(" ",a.selectedJob.assigned_to.email," "),g.Cb(2),g.Pc(" ",a.selectedJob.assigned_to.phone," "),g.Cb(2),g.Pc(" ",a.selectedJob.assigned_to.address," "),g.Cb(3),g.Qc(" ",a.selectedJob.assigned_to.name," - ",a.selectedJob.assigned_to.status," "),g.Cb(17),g.Pc(" ",a.selectedJob.customer.email," "),g.Cb(2),g.Pc(" ",a.selectedJob.customer.phone," "),g.Cb(2),g.Pc(" ",a.selectedJob.customer.address," "),g.Cb(3),g.Pc(" ",a.selectedJob.customer.name,"")}}function T(t,e){if(1&t&&(g.Vb(0,"tr"),g.Vb(1,"td"),g.Nc(2),g.Ub(),g.Vb(3,"td"),g.Nc(4),g.Ub(),g.Vb(5,"td"),g.Nc(6),g.Ub(),g.Vb(7,"td"),g.Nc(8),g.Ub(),g.Ub()),2&t){var o=e.$implicit,a=e.index;g.Cb(2),g.Oc(a+1),g.Cb(2),g.Oc(o.comment),g.Cb(2),g.Oc(o.action),g.Cb(2),g.Oc(o.created_date)}}function S(t,e){if(1&t&&(g.Vb(0,"div",4),g.Vb(1,"div",16),g.Qb(2,"div",17),g.Vb(3,"div",18),g.Vb(4,"table",57),g.Vb(5,"thead"),g.Vb(6,"tr"),g.Vb(7,"th"),g.Nc(8,"ID"),g.Ub(),g.Vb(9,"th"),g.Nc(10,"COMMENT"),g.Ub(),g.Vb(11,"th"),g.Nc(12,"REASONS"),g.Ub(),g.Vb(13,"th"),g.Nc(14,"CREATED DATE"),g.Ub(),g.Ub(),g.Ub(),g.Vb(15,"tfoot"),g.Vb(16,"tr"),g.Vb(17,"th"),g.Nc(18,"ID"),g.Ub(),g.Vb(19,"th"),g.Nc(20,"COMMENT"),g.Ub(),g.Vb(21,"th"),g.Nc(22,"REASONS"),g.Ub(),g.Vb(23,"th"),g.Nc(24,"CREATED DATE"),g.Ub(),g.Ub(),g.Ub(),g.Vb(25,"tbody"),g.Lc(26,T,9,4,"tr",15),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub()),2&t){var o=g.kc(2);g.Cb(26),g.qc("ngForOf",o.activities)}}function k(t,e){1&t&&(g.Vb(0,"div",3),g.Vb(1,"div",28),g.Vb(2,"ngb-tabset",29),g.Vb(3,"ngb-tab",30),g.Lc(4,J,91,17,"ng-template",31),g.Ub(),g.Vb(5,"ngb-tab",32),g.Lc(6,S,27,1,"ng-template",31),g.Ub(),g.Ub(),g.Ub(),g.Ub()),2&t&&(g.Cb(2),g.qc("justify","center"))}var O=function(t,e,o,a){return new(o||(o=Promise))((function(i,b){function c(t){try{r(a.next(t))}catch(e){b(e)}}function n(t){try{r(a.throw(t))}catch(e){b(e)}}function r(t){var e;t.done?i(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(c,n)}r((a=a.apply(t,e||[])).next())}))},j=function(t,e){var o,a,i,b,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return b={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(b[Symbol.iterator]=function(){return this}),b;function n(b){return function(n){return function(b){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,a&&(i=2&b[0]?a.return:b[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,b[1])).done)return i;switch(a=0,i&&(b=[2&b[0],i.value]),b[0]){case 0:case 1:i=b;break;case 4:return c.label++,{value:b[1],done:!1};case 5:c.label++,a=b[1],b=[0];continue;case 7:b=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==b[0]&&2!==b[0])){c=0;continue}if(3===b[0]&&(!i||b[1]>i[0]&&b[1]<i[3])){c.label=b[1];break}if(6===b[0]&&c.label<i[1]){c.label=i[1],i=b;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(b);break}i[2]&&c.ops.pop(),c.trys.pop();continue}b=e.call(t,c)}catch(n){b=[6,n],a=0}finally{o=i=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}([b,n])}}};function R(t,e){if(1&t){var o=g.Wb();g.Vb(0,"li"),g.Vb(1,"a",14),g.gc("click",(function(){g.Cc(o);var t=e.$implicit;return g.kc(2).displayJobsByStatus(t.name)})),g.Nc(2),g.Ub(),g.Ub()}if(2&t){var a=e.$implicit;g.Cb(2),g.Oc(a.name)}}function E(t,e){if(1&t){var o=g.Wb();g.Vb(0,"a",27),g.gc("click",(function(){g.Cc(o);var t=g.kc().$implicit;return g.kc(2).deleteJob(t)})),g.Vb(1,"i",8),g.Nc(2,"close"),g.Ub(),g.Ub()}}function A(t,e){if(1&t){var o=g.Wb();g.Vb(0,"tr"),g.Vb(1,"td"),g.Nc(2),g.Ub(),g.Vb(3,"td"),g.Nc(4),g.Ub(),g.Vb(5,"td"),g.Nc(6),g.Ub(),g.Qb(7,"td",22),g.Vb(8,"td"),g.Qb(9,"div",23),g.Nc(10),g.Ub(),g.Vb(11,"td"),g.Nc(12),g.Ub(),g.Vb(13,"td"),g.Nc(14),g.Ub(),g.Vb(15,"td"),g.Nc(16),g.Ub(),g.Vb(17,"td",21),g.Vb(18,"a",24),g.gc("click",(function(){g.Cc(o);var t=e.$implicit;return g.kc(2).reassignJob(t)})),g.Vb(19,"i",8),g.Nc(20,"refresh"),g.Ub(),g.Ub(),g.Vb(21,"a",25),g.gc("click",(function(){g.Cc(o);var t=e.$implicit;return g.kc(2).editJob(t)})),g.Vb(22,"i",8),g.Nc(23,"edit"),g.Ub(),g.Ub(),g.Lc(24,E,3,0,"a",26),g.Ub(),g.Ub()}if(2&t){var a=e.$implicit,i=g.kc(2);g.Cb(2),g.Oc(a[10]),g.Cb(2),g.Oc(a[1]),g.Cb(2),g.Oc(a[2]),g.Cb(1),g.qc("innerHTML",a[8],g.Dc),g.Cb(2),g.qc("ngStyle",i.getStyle(a[4])),g.Cb(1),g.Pc(" ",a[4]," "),g.Cb(2),g.Oc(a[5]),g.Cb(2),g.Oc(a[6]),g.Cb(2),g.Oc(a[7]),g.Cb(8),g.qc("ngIf","Administrator"===i.role||"SubAdmin"===i.role)}}function I(t,e){if(1&t){var o=g.Wb();g.Vb(0,"div",3),g.Vb(1,"div",4),g.Vb(2,"div",5),g.Vb(3,"div",6),g.Vb(4,"div",7),g.Vb(5,"i",8),g.Nc(6,"assignment"),g.Ub(),g.Ub(),g.Vb(7,"h4",9),g.Nc(8,"Jobs"),g.Ub(),g.Vb(9,"div",10),g.Vb(10,"button",11),g.Vb(11,"i",8),g.Nc(12,"build"),g.Ub(),g.Vb(13,"span",12),g.Nc(14,"Toggle Job Status"),g.Ub(),g.Ub(),g.Vb(15,"ul",13),g.Vb(16,"li"),g.Vb(17,"a",14),g.gc("click",(function(){return g.Cc(o),g.kc().displayJobsByStatus("All")})),g.Nc(18,"All"),g.Ub(),g.Ub(),g.Lc(19,R,3,1,"li",15),g.Ub(),g.Ub(),g.Ub(),g.Vb(20,"div",16),g.Qb(21,"div",17),g.Vb(22,"div",18),g.Vb(23,"table",19),g.Vb(24,"thead"),g.Vb(25,"tr"),g.Vb(26,"th"),g.Nc(27),g.Ub(),g.Vb(28,"th"),g.Nc(29),g.Ub(),g.Vb(30,"th"),g.Nc(31),g.Ub(),g.Vb(32,"th"),g.Nc(33),g.Ub(),g.Vb(34,"th"),g.Nc(35),g.Ub(),g.Vb(36,"th"),g.Nc(37),g.Ub(),g.Vb(38,"th"),g.Nc(39),g.Ub(),g.Vb(40,"th"),g.Nc(41),g.Ub(),g.Vb(42,"th",20),g.Nc(43),g.Ub(),g.Ub(),g.Ub(),g.Vb(44,"tfoot"),g.Vb(45,"tr"),g.Vb(46,"th"),g.Nc(47),g.Ub(),g.Vb(48,"th"),g.Nc(49),g.Ub(),g.Vb(50,"th"),g.Nc(51),g.Ub(),g.Vb(52,"th"),g.Nc(53),g.Ub(),g.Vb(54,"th"),g.Nc(55),g.Ub(),g.Vb(56,"th"),g.Nc(57),g.Ub(),g.Vb(58,"th"),g.Nc(59),g.Ub(),g.Vb(60,"th"),g.Nc(61),g.Ub(),g.Vb(62,"th",21),g.Nc(63),g.Ub(),g.Ub(),g.Ub(),g.Vb(64,"tbody"),g.Lc(65,A,25,10,"tr",15),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub()}if(2&t){var a=g.kc();g.Cb(19),g.qc("ngForOf",a.statuses),g.Cb(8),g.Oc(a.dataTable.headerRow[8]),g.Cb(2),g.Oc(a.dataTable.headerRow[0]),g.Cb(2),g.Oc(a.dataTable.headerRow[1]),g.Cb(2),g.Oc(a.dataTable.headerRow[2]),g.Cb(2),g.Oc(a.dataTable.headerRow[3]),g.Cb(2),g.Oc(a.dataTable.headerRow[4]),g.Cb(2),g.Oc(a.dataTable.headerRow[5]),g.Cb(2),g.Oc(a.dataTable.headerRow[6]),g.Cb(2),g.Pc(" ",a.dataTable.headerRow[7]," "),g.Cb(4),g.Oc(a.dataTable.footerRow[8]),g.Cb(2),g.Oc(a.dataTable.footerRow[0]),g.Cb(2),g.Oc(a.dataTable.footerRow[1]),g.Cb(2),g.Oc(a.dataTable.footerRow[2]),g.Cb(2),g.Oc(a.dataTable.footerRow[3]),g.Cb(2),g.Oc(a.dataTable.footerRow[4]),g.Cb(2),g.Oc(a.dataTable.footerRow[5]),g.Cb(2),g.Oc(a.dataTable.footerRow[6]),g.Cb(2),g.Oc(a.dataTable.footerRow[7]),g.Cb(2),g.qc("ngForOf",a.dataTable.dataRows)}}function B(t,e){if(1&t){var o=g.Wb();g.Vb(0,"li"),g.Vb(1,"a",14),g.gc("click",(function(){g.Cc(o);var t=e.$implicit;return g.kc(3).updateStatus(t.name)})),g.Nc(2),g.Ub(),g.Ub()}if(2&t){var a=e.$implicit;g.Cb(2),g.Oc(a.name)}}var D=function(t){return{color:t}};function L(t,e){if(1&t){var o=g.Wb();g.Vb(0,"div",4),g.Vb(1,"button",33),g.gc("click",(function(){return g.Cc(o),g.kc(2).cancelViewJob()})),g.Nc(2," Cancel "),g.Ub(),g.Vb(3,"ul",34),g.Vb(4,"li",35),g.Vb(5,"div",36),g.Vb(6,"i",8),g.Nc(7,"work"),g.Ub(),g.Ub(),g.Vb(8,"div",37),g.Vb(9,"div",38),g.Vb(10,"span",39),g.Nc(11,"JOB REQUEST"),g.Ub(),g.Ub(),g.Vb(12,"div",40),g.Vb(13,"p"),g.Nc(14," Comment: "),g.Qb(15,"br"),g.Vb(16,"strong"),g.Nc(17),g.Ub(),g.Ub(),g.Qb(18,"br"),g.Vb(19,"p",41),g.Nc(20," Status: "),g.Qb(21,"br"),g.Vb(22,"strong"),g.Nc(23),g.Ub(),g.Ub(),g.Qb(24,"br"),g.Vb(25,"p"),g.Nc(26,"Request:"),g.Ub(),g.Qb(27,"div",22),g.Qb(28,"hr"),g.Vb(29,"div",10),g.Vb(30,"button",11),g.Vb(31,"i",8),g.Nc(32,"build"),g.Ub(),g.Vb(33,"span",12),g.Nc(34,"Update Job Status"),g.Ub(),g.Ub(),g.Vb(35,"ul",13),g.Lc(36,B,3,1,"li",15),g.Ub(),g.Ub(),g.Vb(37,"div",42),g.Vb(38,"button",43),g.gc("click",(function(){g.Cc(o);var t=g.kc(2);return t.reassignJob([t.selectedJob.id,"","",t.selectedJob.customer.email])})),g.Nc(39," Re-Assign Job "),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Vb(40,"li",35),g.Vb(41,"div",44),g.Vb(42,"i",8),g.Nc(43,"handyman"),g.Ub(),g.Ub(),g.Vb(44,"div",37),g.Vb(45,"div",38),g.Vb(46,"span",45),g.Nc(47,"TECHNICIAN INFO"),g.Ub(),g.Ub(),g.Vb(48,"div",40),g.Vb(49,"div",46),g.Vb(50,"div",47),g.Vb(51,"div",48),g.Vb(52,"a",49),g.Qb(53,"img",50),g.Ub(),g.Ub(),g.Vb(54,"div",16),g.Vb(55,"h6",51),g.Nc(56),g.Ub(),g.Vb(57,"h4",9),g.Nc(58),g.Ub(),g.Vb(59,"p",52),g.Nc(60),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Vb(61,"h6"),g.Qb(62,"i",53),g.Nc(63),g.Ub(),g.Ub(),g.Ub(),g.Vb(64,"li",35),g.Vb(65,"div",54),g.Vb(66,"i",8),g.Nc(67,"people"),g.Ub(),g.Ub(),g.Vb(68,"div",37),g.Vb(69,"div",38),g.Vb(70,"span",55),g.Nc(71,"CUSTOMER INFO"),g.Ub(),g.Ub(),g.Vb(72,"div",40),g.Vb(73,"div",46),g.Vb(74,"div",47),g.Vb(75,"div",48),g.Vb(76,"a",49),g.Qb(77,"img",56),g.Ub(),g.Ub(),g.Vb(78,"div",16),g.Vb(79,"h6",51),g.Nc(80),g.Ub(),g.Vb(81,"h4",9),g.Nc(82),g.Ub(),g.Vb(83,"p",52),g.Nc(84),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Vb(85,"h6"),g.Qb(86,"i",53),g.Nc(87),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Qb(88,"br"),g.Vb(89,"button",33),g.gc("click",(function(){return g.Cc(o),g.kc(2).cancelViewJob()})),g.Nc(90," Cancel "),g.Ub(),g.Ub()}if(2&t){var a=g.kc(2);g.Cb(17),g.Oc(a.selectedJob.note),g.Cb(2),g.qc("ngStyle",g.uc(15,D,a.getStatusColorByName(a.selectedJob.status))),g.Cb(4),g.Oc(a.selectedJob.status),g.Cb(4),g.qc("innerHTML",a.displayHTMLCategories(a.selectedJob.category),g.Dc),g.Cb(9),g.qc("ngForOf",a.statuses),g.Cb(17),g.rc("src",a.selectedJob.assigned_to.image,g.Ec),g.Cb(3),g.Pc(" ",a.selectedJob.assigned_to.email," "),g.Cb(2),g.Pc(" ",a.selectedJob.assigned_to.phone," "),g.Cb(2),g.Pc(" ",a.selectedJob.assigned_to.address," "),g.Cb(3),g.Qc(" ",a.selectedJob.assigned_to.name," - ",a.selectedJob.assigned_to.status," "),g.Cb(17),g.Pc(" ",a.selectedJob.customer.email," "),g.Cb(2),g.Pc(" ",a.selectedJob.customer.phone," "),g.Cb(2),g.Pc(" ",a.selectedJob.customer.address," "),g.Cb(3),g.Pc(" ",a.selectedJob.customer.name,"")}}function M(t,e){if(1&t&&(g.Vb(0,"tr"),g.Vb(1,"td"),g.Nc(2),g.Ub(),g.Vb(3,"td"),g.Nc(4),g.Ub(),g.Vb(5,"td"),g.Nc(6),g.Ub(),g.Vb(7,"td"),g.Nc(8),g.Ub(),g.Ub()),2&t){var o=e.$implicit,a=e.index;g.Cb(2),g.Oc(a+1),g.Cb(2),g.Oc(o.comment),g.Cb(2),g.Oc(o.action),g.Cb(2),g.Oc(o.created_date)}}function _(t,e){if(1&t&&(g.Vb(0,"div",4),g.Vb(1,"div",16),g.Qb(2,"div",17),g.Vb(3,"div",18),g.Vb(4,"table",57),g.Vb(5,"thead"),g.Vb(6,"tr"),g.Vb(7,"th"),g.Nc(8,"ID"),g.Ub(),g.Vb(9,"th"),g.Nc(10,"COMMENT"),g.Ub(),g.Vb(11,"th"),g.Nc(12,"REASONS"),g.Ub(),g.Vb(13,"th"),g.Nc(14,"CREATED DATE"),g.Ub(),g.Ub(),g.Ub(),g.Vb(15,"tfoot"),g.Vb(16,"tr"),g.Vb(17,"th"),g.Nc(18,"ID"),g.Ub(),g.Vb(19,"th"),g.Nc(20,"COMMENT"),g.Ub(),g.Vb(21,"th"),g.Nc(22,"REASONS"),g.Ub(),g.Vb(23,"th"),g.Nc(24,"CREATED DATE"),g.Ub(),g.Ub(),g.Ub(),g.Vb(25,"tbody"),g.Lc(26,M,9,4,"tr",15),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Ub()),2&t){var o=g.kc(2);g.Cb(26),g.qc("ngForOf",o.activities)}}function x(t,e){1&t&&(g.Vb(0,"div",3),g.Vb(1,"div",28),g.Vb(2,"ngb-tabset",29),g.Vb(3,"ngb-tab",30),g.Lc(4,L,91,17,"ng-template",31),g.Ub(),g.Vb(5,"ngb-tab",32),g.Lc(6,_,27,1,"ng-template",31),g.Ub(),g.Ub(),g.Ub(),g.Ub()),2&t&&(g.Cb(2),g.qc("justify","center"))}var Q=[{path:"",children:[{path:"",component:function(){function t(){this.cusEmail="",this.data=[],this.jobs=[],this.statuses=[],this.categories=[],this.activities=[],this.viewJob=!1,this.config=new d.a,this.button_pressed=!1,this.service=new f.a,this.role=""}return t.prototype.getJobByStatus=function(t){var e=this;(""===this.cusEmail?r.firestore().collection("jobs").where("status","==",t).orderBy("timestamp","desc"):r.firestore().collection("jobs").where("status","==",t).where("customer.email","==",this.cusEmail).orderBy("timestamp","desc")).onSnapshot((function(t){e.data=[],e.jobs=[],t.forEach((function(t){var o=t.data();e.jobs.push(o),e.data.push([o.id,o.assigned_to.name,o.customer.name,o.customer.email,o.status,o.created_by,o.created_date,o.modified_date,e.displayHTMLCategories(o.category),"btn-link",""+o.job_id])})),e.dataTable={headerRow:["Assigned To","Customer","Job Request","Status","Created By","Created Date","Modified Date","Actions","ID"],footerRow:["Assigned To","Customer","Job Request","Status","Created By","Created Date","Modified Date","Actions","ID"],dataRows:e.data}}))},t.prototype.displayJobsByStatus=function(t){"All"!==t?this.getJobByStatus(t):this.getJob()},t.prototype.getJob=function(){var t=this;(""===this.cusEmail?r.firestore().collection("jobs").orderBy("timestamp","desc"):r.firestore().collection("jobs").where("customer.email","==",this.cusEmail).orderBy("timestamp","desc")).onSnapshot((function(e){t.data=[],t.jobs=[],e.forEach((function(e){var o=e.data();t.jobs.push(o),t.data.push([o.id,o.assigned_to.name,o.customer.name,o.customer.email,o.status,o.created_by,o.created_date,o.modified_date,t.displayHTMLCategories(o.category),"btn-link",""+o.job_id])})),t.dataTable={headerRow:["Assigned To","Customer","Skill-Set","Status","Created By","Created Date","Modified Date","Actions","ID"],footerRow:["Assigned To","Customer","Skill-Set","Status","Created By","Created Date","Modified Date","Actions","ID"],dataRows:t.data}}))},Object.defineProperty(t.prototype,"totalRows",{get:function(){return this.getJob.length},enumerable:!1,configurable:!0}),t.prototype.getStatus=function(){var t=this;r.firestore().collection("status").orderBy("name","asc").get().then((function(e){t.statuses=[],e.forEach((function(e){var o=e.data();t.statuses.push(o)})),t.getCategories()}))},t.prototype.getStatusColorByName=function(t){return this.statuses.find((function(e,o,a){return e.name===t})).color},t.prototype.getCategories=function(){var t=this;r.firestore().collection("categories").orderBy("name","desc").onSnapshot((function(e){if(t.categories=[],e.forEach((function(e){var o=e.data();t.categories.push(o)})),""===location.search)t.getJob();else{var o=location.search.substring(3).replace("%20"," ");t.getJobByStatus(o)}}))},t.prototype.getStyle=function(t){return{background:""+this.getStatusColorByName(t),width:"20px",height:"20px","border-radius":"10px"}},t.prototype.ngOnInit=function(){var t=this,e=localStorage.getItem("email");this.service.getUserData(e).then((function(e){t.role=e.role,t.getStatus()}))},t.prototype.getCategoryNameById=function(t){return this.categories.find((function(e,o,a){return e.id===t})).name},t.prototype.displayHTMLCategories=function(t){var e=this,o="<ul>";return t.forEach((function(t){var a=e.getCategoryNameById(t);o+=void 0===a?"":"<li><strong>"+a+"</strong></li>"})),o+="</ul>"},t.prototype.editJob=function(t){this.selectedJob=this.jobs.find((function(e,o,a){return e.id===t[0]})),this.viewJob=!0,this.getJobActivities()},t.prototype.getJobActivities=function(){var t=this;r.firestore().collection("jobs").doc(this.selectedJob.id).collection("activities").orderBy("timestamp","desc").onSnapshot((function(e){t.activities=[],e.forEach((function(e){var o=e.data();t.activities.push(o)}))}))},t.prototype.cancelViewJob=function(){this.viewJob=!1,this.selectedJob=null},t.prototype.deleteJob=function(t){var e=this,o=t[0];u()({title:"Delete Alert",text:"Are you sure about deleting this job?",type:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then((function(t){t.value?r.firestore().collection("jobs").doc(o).delete().then((function(t){var o=localStorage.getItem("email"),a=localStorage.getItem("name");e.config.logActivity(a+"|"+o+" deleted a job"),e.config.displayMessage("Successfully deleted",!0)})).catch((function(t){e.config.displayMessage(""+t,!1)})):u()({title:"Cancelled",text:"Deletion not successful",type:"error",confirmButtonClass:"btn btn-info",buttonsStyling:!1}).catch(u.a.noop)}))},t.prototype.updateStatus=function(t){var e=this,o=localStorage.getItem("email"),a=localStorage.getItem("name");r.firestore().collection("jobs").doc(this.selectedJob.id).update({status:t}).then((function(i){return m(e,void 0,void 0,(function(){var e,i,b=this;return V(this,(function(c){switch(c.label){case 0:return document.getElementById("stat").innerHTML="Status: <br><strong>"+t+"</strong>",[4,this.backEndJobUpdate(t)];case 1:return c.sent(),e=r.database().ref().push().key,i={id:e,comment:"This job status was changed to : "+t,created_date:(new Date).toLocaleDateString()+" - "+(new Date).toLocaleTimeString(),timestamp:r.firestore.FieldValue.serverTimestamp()},r.firestore().collection("jobs").doc(this.selectedJob.id).collection("activities").doc(e).set(i).then((function(e){b.config.logActivity(a+"|"+o+" updated job status to : "+t),b.config.displayMessage("Status updated successfully",!0)})).catch((function(t){b.config.displayMessage(""+t,!1)})),[2]}}))}))})).catch((function(t){e.config.displayMessage(""+t,!1)}))},t.prototype.reassignJob=function(t){location.href="/new-ticket?customer="+t[3]+"&jobid="+t[0]},t.prototype.backEndJobUpdate=function(t){return m(this,void 0,void 0,(function(){var e;return V(this,(function(o){switch(o.label){case 0:return e=localStorage.getItem("email"),[4,r.firestore().collection("jobs").doc(this.selectedJob.id).update({back_end_status:"completed"===t.toLowerCase()||"approved"===t.toLowerCase()||"canceled"===t.toLowerCase()||"cancelled"===t.toLowerCase()?"inactive":"active"})];case 1:return o.sent(),"completed"!==t.toLowerCase()&&"canceled"!==t.toLowerCase()&&"cancelled"!==t.toLowerCase()&&"approved"!==t.toLowerCase()||this.config.updateTechnicianStatus(e,"online"),[2]}}))}))},t.prototype.ngAfterViewInit=function(){s("#datatables").DataTable({pagingType:"full_numbers",lengthMenu:[[10,25,50,-1],[10,25,50,"All"]],responsive:!0,language:{search:"_INPUT_",searchPlaceholder:"Search records"}}),s("#datatables").DataTable(),s(".card .material-datatables label").addClass("form-group")},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=g.Jb({type:t,selectors:[["app-add-job"]],inputs:{cusEmail:"cusEmail"},decls:4,vars:2,consts:[[1,"main-content"],[1,"container-fluid"],["class","row",4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","card-header-primary","card-header-icon"],[1,"card-icon"],[1,"material-icons"],[1,"card-title"],[1,"dropdown","pull-left"],["mat-raised-button","","type","button","data-toggle","dropdown",1,"btn","btn-round","btn-info","dropdown-toggle"],[1,"caret"],["role","menu",1,"dropdown-menu","dropdown-menu-right"],["href","javascript:void(0)",3,"click"],[4,"ngFor","ngForOf"],[1,"card-body"],[1,"toolbar"],[1,"material-datatables"],["id","datatables","cellspacing","0","width","100%",1,"table","table-striped","table-no-bordered","table-hover",2,"width","100%"],[1,"disabled-sorting","text-right"],[1,"text-right"],[3,"innerHTML"],[3,"ngStyle"],["href","javascript:void(0)","data-toggle","tooltip","title","re-assign job","data-placement","bottom",1,"btn","btn-link","btn-warning","btn-just-icon","refresh",3,"click"],["href","javascript:void(0)","data-toggle","tooltip","title","edit","data-placement","bottom",1,"btn","btn-link","btn-warning","btn-just-icon","edit",3,"click"],["data-toggle","tooltip","title","delete","data-placement","bottom","href","javascript:void(0)","class","btn btn-link btn-danger btn-just-icon remove",3,"click",4,"ngIf"],["data-toggle","tooltip","title","delete","data-placement","bottom","href","javascript:void(0)",1,"btn","btn-link","btn-danger","btn-just-icon","remove",3,"click"],[1,"col-lg-12"],["type","pills",1,"custom-tab-content","flex-column","flex-md-row",3,"justify"],["title","INFORMATION"],["ngbTabContent",""],["title","ACTIVITIES"],["mat-raised-button","","type","button",1,"btn","btn-round","btn-danger",3,"click"],[1,"timeline","timeline-simple"],[1,"timeline-inverted"],[1,"timeline-badge","info"],[1,"timeline-panel"],[1,"timeline-heading"],[1,"badge","badge-info"],[1,"timeline-body"],["id","stat",3,"ngStyle"],[1,"dropdown","pull-right"],["mat-raised-button","","type","button",1,"btn","btn-round","btn-primary",3,"click"],[1,"timeline-badge","success"],[1,"badge","badge-success"],[1,"col-md-4"],[1,"card","card-profile"],[1,"card-avatar"],["href","javascript:void(0)"],[1,"img",3,"src"],[1,"card-category","text-gray"],[1,"card-description"],[1,"ti-time"],[1,"timeline-badge","danger"],[1,"badge","badge-danger"],["src","assets/img/default-avatar.png",1,"img"],["id","datatables2","cellspacing","0","width","100%",1,"table","table-striped","table-no-bordered","table-hover",2,"width","100%"]],template:function(t,e){1&t&&(g.Vb(0,"div",0),g.Vb(1,"div",1),g.Lc(2,C,66,20,"div",2),g.Lc(3,k,7,1,"div",2),g.Ub(),g.Ub()),2&t&&(g.Cb(2),g.qc("ngIf",!e.viewJob),g.Cb(1),g.qc("ngIf",e.viewJob))},directives:[i.m,h.b,i.l,i.n,p.e,p.c,p.d],styles:[""]}),t}()}]},{path:":type/:email",children:[{path:"",component:function(){function t(t){var e=this;this.route=t,this.userEmail="",this.userType="",this.data=[],this.jobs=[],this.statuses=[],this.categories=[],this.activities=[],this.viewJob=!1,this.config=new d.a,this.button_pressed=!1,this.service=new f.a,this.role="",this.route.params.subscribe((function(t){var o=t.type,a=t.email;null!==o&&null!==a?(e.userEmail=(""+a).toLowerCase(),e.userType=o):location.href="/"}))}return t.prototype.getJobByStatus=function(t){var e=this;("customer"===this.userType?r.firestore().collection("jobs").where("status","==",t).where("customer.email","==",this.userEmail).orderBy("timestamp","desc"):r.firestore().collection("jobs").where("status","==",t).where("assigned_to.email","==",this.userEmail).orderBy("timestamp","desc")).onSnapshot((function(t){e.data=[],e.jobs=[],t.forEach((function(t){var o=t.data();e.jobs.push(o),e.data.push([o.id,o.assigned_to.name,o.customer.name,o.customer.email,o.status,o.created_by,o.created_date,o.modified_date,e.displayHTMLCategories(o.category),"btn-link",""+o.job_id])})),e.dataTable={headerRow:["Assigned To","Customer","Job Request","Status","Created By","Created Date","Modified Date","Actions","ID"],footerRow:["Assigned To","Customer","Job Request","Status","Created By","Created Date","Modified Date","Actions","ID"],dataRows:e.data}}))},t.prototype.displayJobsByStatus=function(t){"All"!==t?this.getJobByStatus(t):this.getJob()},t.prototype.getJob=function(){var t=this;("customer"===this.userType?r.firestore().collection("jobs").where("customer.email","==",this.userEmail).orderBy("timestamp","desc"):r.firestore().collection("jobs").where("assigned_to.email","==",this.userEmail).orderBy("timestamp","desc")).onSnapshot((function(e){t.data=[],t.jobs=[],e.forEach((function(e){var o=e.data();t.jobs.push(o),t.data.push([o.id,o.assigned_to.name,o.customer.name,o.customer.email,o.status,o.created_by,o.created_date,o.modified_date,t.displayHTMLCategories(o.category),"btn-link",""+o.job_id])})),t.dataTable={headerRow:["Assigned To","Customer","Skill-Set","Status","Created By","Created Date","Modified Date","Actions","ID"],footerRow:["Assigned To","Customer","Skill-Set","Status","Created By","Created Date","Modified Date","Actions","ID"],dataRows:t.data}}))},Object.defineProperty(t.prototype,"totalRows",{get:function(){return this.getJob.length},enumerable:!1,configurable:!0}),t.prototype.getStatus=function(){var t=this;r.firestore().collection("status").orderBy("name","asc").get().then((function(e){t.statuses=[],e.forEach((function(e){var o=e.data();t.statuses.push(o)})),t.getCategories()}))},t.prototype.getStatusColorByName=function(t){return this.statuses.find((function(e,o,a){return e.name===t})).color},t.prototype.getCategories=function(){var t=this;r.firestore().collection("categories").orderBy("name","desc").onSnapshot((function(e){t.categories=[],e.forEach((function(e){var o=e.data();t.categories.push(o)})),t.getJob()}))},t.prototype.getStyle=function(t){return{background:""+this.getStatusColorByName(t),width:"20px",height:"20px","border-radius":"10px"}},t.prototype.ngOnInit=function(){var t=this,e=localStorage.getItem("email");this.service.getUserData(e).then((function(e){t.role=e.role,t.getStatus()}))},t.prototype.getCategoryNameById=function(t){return this.categories.find((function(e,o,a){return e.id===t})).name},t.prototype.displayHTMLCategories=function(t){var e=this,o="<ul>";return t.forEach((function(t){var a=e.getCategoryNameById(t);o+=void 0===a?"":"<li><strong>"+a+"</strong></li>"})),o+="</ul>"},t.prototype.editJob=function(t){this.selectedJob=this.jobs.find((function(e,o,a){return e.id===t[0]})),this.viewJob=!0,this.getJobActivities()},t.prototype.getJobActivities=function(){var t=this;r.firestore().collection("jobs").doc(this.selectedJob.id).collection("activities").orderBy("timestamp","desc").onSnapshot((function(e){t.activities=[],e.forEach((function(e){var o=e.data();t.activities.push(o)}))}))},t.prototype.cancelViewJob=function(){this.viewJob=!1,this.selectedJob=null},t.prototype.deleteJob=function(t){var e=this,o=t[0];u()({title:"Delete Alert",text:"Are you sure about deleting this job?",type:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then((function(t){t.value?r.firestore().collection("jobs").doc(o).delete().then((function(t){var o=localStorage.getItem("email"),a=localStorage.getItem("name");e.config.logActivity(a+"|"+o+" deleted a job"),e.config.displayMessage("Successfully deleted",!0)})).catch((function(t){e.config.displayMessage(""+t,!1)})):u()({title:"Cancelled",text:"Deletion not successful",type:"error",confirmButtonClass:"btn btn-info",buttonsStyling:!1}).catch(u.a.noop)}))},t.prototype.updateStatus=function(t){var e=this,o=localStorage.getItem("email"),a=localStorage.getItem("name");r.firestore().collection("jobs").doc(this.selectedJob.id).update({status:t}).then((function(i){return O(e,void 0,void 0,(function(){var e,i,b=this;return j(this,(function(c){switch(c.label){case 0:return document.getElementById("stat").innerHTML="Status: <br><strong>"+t+"</strong>",[4,this.backEndJobUpdate(t)];case 1:return c.sent(),e=r.database().ref().push().key,i={id:e,comment:"This job status was changed to : "+t,created_date:(new Date).toLocaleDateString()+" - "+(new Date).toLocaleTimeString(),timestamp:r.firestore.FieldValue.serverTimestamp()},r.firestore().collection("jobs").doc(this.selectedJob.id).collection("activities").doc(e).set(i).then((function(e){b.config.logActivity(a+"|"+o+" updated job status to : "+t),b.config.displayMessage("Status updated successfully",!0)})).catch((function(t){b.config.displayMessage(""+t,!1)})),[2]}}))}))})).catch((function(t){e.config.displayMessage(""+t,!1)}))},t.prototype.reassignJob=function(t){location.href="/new-ticket?customer="+t[3]+"&jobid="+t[0]},t.prototype.backEndJobUpdate=function(t){return O(this,void 0,void 0,(function(){var e;return j(this,(function(o){switch(o.label){case 0:return e=localStorage.getItem("email"),[4,r.firestore().collection("jobs").doc(this.selectedJob.id).update({back_end_status:"completed"===t.toLowerCase()||"canceled"===t.toLowerCase()||"cancelled"===t.toLowerCase()?"inactive":"active"})];case 1:return o.sent(),"completed"!==t.toLowerCase()&&"canceled"!==t.toLowerCase()&&"cancelled"!==t.toLowerCase()||this.config.updateTechnicianStatus(e,"online"),[2]}}))}))},t.prototype.ngAfterViewInit=function(){s("#datatables").DataTable({pagingType:"full_numbers",lengthMenu:[[10,25,50,-1],[10,25,50,"All"]],responsive:!0,language:{search:"_INPUT_",searchPlaceholder:"Search records"}}),s("#datatables").DataTable(),s(".card .material-datatables label").addClass("form-group")},t.\u0275fac=function(e){return new(e||t)(g.Pb(a.a))},t.\u0275cmp=g.Jb({type:t,selectors:[["search-add-job"]],decls:4,vars:2,consts:[[1,"main-content"],[1,"container-fluid"],["class","row",4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","card-header-primary","card-header-icon"],[1,"card-icon"],[1,"material-icons"],[1,"card-title"],[1,"dropdown","pull-left"],["mat-raised-button","","type","button","data-toggle","dropdown",1,"btn","btn-round","btn-info","dropdown-toggle"],[1,"caret"],["role","menu",1,"dropdown-menu","dropdown-menu-right"],["href","javascript:void(0)",3,"click"],[4,"ngFor","ngForOf"],[1,"card-body"],[1,"toolbar"],[1,"material-datatables"],["id","datatables","cellspacing","0","width","100%",1,"table","table-striped","table-no-bordered","table-hover",2,"width","100%"],[1,"disabled-sorting","text-right"],[1,"text-right"],[3,"innerHTML"],[3,"ngStyle"],["href","javascript:void(0)","data-toggle","tooltip","title","re-assign job","data-placement","bottom",1,"btn","btn-link","btn-warning","btn-just-icon","refresh",3,"click"],["href","javascript:void(0)","data-toggle","tooltip","title","edit","data-placement","bottom",1,"btn","btn-link","btn-warning","btn-just-icon","edit",3,"click"],["data-toggle","tooltip","title","delete","data-placement","bottom","href","javascript:void(0)","class","btn btn-link btn-danger btn-just-icon remove",3,"click",4,"ngIf"],["data-toggle","tooltip","title","delete","data-placement","bottom","href","javascript:void(0)",1,"btn","btn-link","btn-danger","btn-just-icon","remove",3,"click"],[1,"col-lg-12"],["type","pills",1,"custom-tab-content","flex-column","flex-md-row",3,"justify"],["title","INFORMATION"],["ngbTabContent",""],["title","ACTIVITIES"],["mat-raised-button","","type","button",1,"btn","btn-round","btn-danger",3,"click"],[1,"timeline","timeline-simple"],[1,"timeline-inverted"],[1,"timeline-badge","info"],[1,"timeline-panel"],[1,"timeline-heading"],[1,"badge","badge-info"],[1,"timeline-body"],["id","stat",3,"ngStyle"],[1,"dropdown","pull-right"],["mat-raised-button","","type","button",1,"btn","btn-round","btn-primary",3,"click"],[1,"timeline-badge","success"],[1,"badge","badge-success"],[1,"col-md-4"],[1,"card","card-profile"],[1,"card-avatar"],["href","javascript:void(0)"],[1,"img",3,"src"],[1,"card-category","text-gray"],[1,"card-description"],[1,"ti-time"],[1,"timeline-badge","danger"],[1,"badge","badge-danger"],["src","assets/img/default-avatar.png",1,"img"],["id","datatables2","cellspacing","0","width","100%",1,"table","table-striped","table-no-bordered","table-hover",2,"width","100%"]],template:function(t,e){1&t&&(g.Vb(0,"div",0),g.Vb(1,"div",1),g.Lc(2,I,66,20,"div",2),g.Lc(3,x,7,1,"div",2),g.Ub(),g.Ub()),2&t&&(g.Cb(2),g.qc("ngIf",!e.viewJob),g.Cb(1),g.qc("ngIf",e.viewJob))},directives:[i.m,h.b,i.l,i.n,p.e,p.c,p.d],styles:[""]}),t}()}]}],q=function(){function t(){}return t.\u0275mod=g.Nb({type:t}),t.\u0275inj=g.Mb({factory:function(e){return new(e||t)},imports:[[i.c,a.g.forChild(Q),b.l,c.a,n.b,p.b]]}),t}()}}]);