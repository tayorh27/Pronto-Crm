(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{Ak7V:function(t,e,a){"use strict";a.r(e),a.d(e,"CategoryModule",(function(){return k}));var n=a("tyNb"),i=a("ofXK"),o=a("3Pt+"),c=a("OsiS"),r=a("ZAI4"),l=a("Wcq6"),d=(a("5x/H"),a("Zs65"),a("EVdn")),b=(a("FlOX"),a("e1J8"),a("4WDQ")),s=a("PSD3"),u=a.n(s),f=a("P9ut"),g=a("fXoL"),h=a("bTqV"),p=a("kmnG"),m=a("qFsG");function C(t,e){if(1&t){var a=g.Wb();g.Vb(0,"a",21),g.gc("click",(function(){g.Cc(a);var t=g.kc().$implicit;return g.kc(3).deleteCategory(t[0],t[1])})),g.Vb(1,"i",8),g.Nc(2,"close"),g.Ub(),g.Ub()}}function v(t,e){if(1&t){var a=g.Wb();g.Vb(0,"tr"),g.Vb(1,"td"),g.Nc(2),g.Ub(),g.Vb(3,"td"),g.Nc(4),g.Ub(),g.Vb(5,"td"),g.Nc(6),g.Ub(),g.Vb(7,"td",17),g.Vb(8,"a",19),g.gc("click",(function(){g.Cc(a);var t=e.$implicit;return g.kc(3).editCatClick(t[0])})),g.Vb(9,"i",8),g.Nc(10,"edit"),g.Ub(),g.Ub(),g.Lc(11,C,3,0,"a",20),g.Ub(),g.Ub()}if(2&t){var n=e.$implicit,i=g.kc(3);g.Cb(2),g.Oc(n[1]),g.Cb(2),g.Oc(n[2]),g.Cb(2),g.Oc(n[3]),g.Cb(5),g.qc("ngIf","Administrator"===i.role||"SubAdmin"===i.role)}}function y(t,e){if(1&t&&(g.Vb(0,"div",14),g.Vb(1,"table",15),g.Vb(2,"thead"),g.Vb(3,"tr"),g.Vb(4,"th"),g.Nc(5),g.Ub(),g.Vb(6,"th"),g.Nc(7),g.Ub(),g.Vb(8,"th"),g.Nc(9),g.Ub(),g.Vb(10,"th",16),g.Nc(11),g.Ub(),g.Ub(),g.Ub(),g.Vb(12,"tfoot"),g.Vb(13,"tr"),g.Vb(14,"th"),g.Nc(15),g.Ub(),g.Vb(16,"th"),g.Nc(17),g.Ub(),g.Vb(18,"th"),g.Nc(19),g.Ub(),g.Vb(20,"th",17),g.Nc(21),g.Ub(),g.Ub(),g.Ub(),g.Vb(22,"tbody"),g.Lc(23,v,12,4,"tr",18),g.Ub(),g.Ub(),g.Ub()),2&t){var a=g.kc(2);g.Cb(5),g.Oc(a.dataTable.headerRow[0]),g.Cb(2),g.Oc(a.dataTable.headerRow[1]),g.Cb(2),g.Oc(a.dataTable.headerRow[2]),g.Cb(2),g.Pc(" ",a.dataTable.headerRow[3]," "),g.Cb(4),g.Oc(a.dataTable.footerRow[0]),g.Cb(2),g.Oc(a.dataTable.footerRow[1]),g.Cb(2),g.Oc(a.dataTable.footerRow[2]),g.Cb(2),g.Oc(a.dataTable.footerRow[3]),g.Cb(2),g.qc("ngForOf",a.dataTable.dataRows)}}function w(t,e){if(1&t){var a=g.Wb();g.Vb(0,"div",3),g.Vb(1,"div",4),g.Vb(2,"div",5),g.Vb(3,"div",6),g.Vb(4,"div",7),g.Vb(5,"i",8),g.Nc(6,"assignment"),g.Ub(),g.Ub(),g.Vb(7,"h4",9),g.Nc(8,"Skill-Sets"),g.Ub(),g.Vb(9,"button",10),g.gc("click",(function(){return g.Cc(a),g.kc().addCat()})),g.Nc(10," Add New Skill-set "),g.Ub(),g.Ub(),g.Vb(11,"div",11),g.Qb(12,"div",12),g.Lc(13,y,24,9,"div",13),g.Ub(),g.Ub(),g.Ub(),g.Ub()}if(2&t){var n=g.kc();g.Cb(13),g.qc("ngIf",n.dataTable)}}function V(t,e){if(1&t){var a=g.Wb();g.Vb(0,"div",3),g.Vb(1,"div",22),g.Vb(2,"div",5),g.Vb(3,"div",23),g.Vb(4,"div",7),g.Vb(5,"i",8),g.Nc(6,"mail_outline"),g.Ub(),g.Ub(),g.Vb(7,"h4",9),g.Nc(8,"New Skill Set"),g.Ub(),g.Ub(),g.Vb(9,"div",11),g.Vb(10,"form",24),g.Vb(11,"mat-form-field",25),g.Vb(12,"input",26),g.gc("ngModelChange",(function(t){return g.Cc(a),g.kc()._name=t})),g.Ub(),g.Ub(),g.Ub(),g.Ub(),g.Vb(13,"div",27),g.Vb(14,"button",28),g.gc("click",(function(){return g.Cc(a),g.kc().categorySubmitClicked()})),g.Nc(15),g.Ub(),g.Vb(16,"button",29),g.gc("click",(function(){return g.Cc(a),g.kc().cancelAddCat()})),g.Nc(17," Cancel "),g.Ub(),g.Ub(),g.Qb(18,"br"),g.Ub(),g.Ub(),g.Ub()}if(2&t){var n=g.kc();g.Cb(12),g.qc("ngModel",n._name),g.Cb(2),g.qc("disabled",n.button_pressed),g.Cb(1),g.Pc(" ",n.button_pressed?"Please wait...":"Submit"," ")}}var U=[{path:"",children:[{path:"",component:function(){function t(){this.data=[],this.categories=[],this.addNewCat=!1,this.editCat=!1,this.config=new b.a,this.modal_name="",this.modal_geo="",this.button_pressed=!1,this.service=new f.a,this.role="",this._name=""}return t.prototype.getCategories=function(){var t=this;l.firestore().collection("categories").orderBy("timestamp","desc").onSnapshot((function(e){t.data=[],t.categories=[],e.forEach((function(e){var a=e.data();t.categories.push(a),t.data.push([a.id,a.name,a.created_date,a.modified_date,"btn-link"])})),t.dataTable={headerRow:["Name","Created Date","Modified Date","Actions"],footerRow:["Name","Created Date","Modified Date","Actions"],dataRows:t.data}}))},t.prototype.totalCategory=function(){},t.prototype.ngOnInit=function(){var t=this,e=localStorage.getItem("email");this.service.getUserData(e).then((function(e){t.role=e.role,t.getCategories()}))},t.prototype.addCat=function(){this.addNewCat=!0,this.editCat=!1},t.prototype.cancelAddCat=function(){this.addNewCat=!1,this.editCat=!1,this.button_pressed=!1,this._name=""},t.prototype.editCatClick=function(t){this.editCat=!0,this.addNewCat=!0,this.selectedCategory=this.categories.find((function(e,a,n){return e.id===t})),this._name=this.selectedCategory.name},t.prototype.deleteCategory=function(t,e){var a=this;u()({title:"Delete Alert",text:"Are you sure about deleting this skill-set?",type:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it",confirmButtonClass:"btn btn-success",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then((function(n){n.value?l.firestore().collection("categories").doc(t).delete().then((function(t){var n=localStorage.getItem("email"),i=localStorage.getItem("name");a.config.logActivity(i+"|"+n+" deleted this skill-set: "+e),a.config.displayMessage("Successfully deleted",!0)})).catch((function(t){a.config.displayMessage(""+t,!1)})):u()({title:"Cancelled",text:"Deletion not successful",type:"error",confirmButtonClass:"btn btn-info",buttonsStyling:!1}).catch(u.a.noop)}))},t.prototype.categorySubmitClicked=function(){return t=this,void 0,a=function(){var t,e,a,n,i,o=this;return function(t,e){var a,n,i,o,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:r(0),throw:r(1),return:r(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function r(o){return function(r){return function(o){if(a)throw new TypeError("Generator is already executing.");for(;c;)try{if(a=1,n&&(i=2&o[0]?n.return:o[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,o[1])).done)return i;switch(n=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return c.label++,{value:o[1],done:!1};case 5:c.label++,n=o[1],o=[0];continue;case 7:o=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){c=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){c.label=o[1];break}if(6===o[0]&&c.label<i[1]){c.label=i[1],i=o;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(o);break}i[2]&&c.ops.pop(),c.trys.pop();continue}o=e.call(t,c)}catch(r){o=[6,r],n=0}finally{a=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,r])}}}(this,(function(c){switch(c.label){case 0:return""===(t=document.getElementById("cat_name").value)?[2]:(e=l.database().ref().push().key,a=localStorage.getItem("email"),n=localStorage.getItem("name"),this.button_pressed=!0,this.editCat?[3,2]:[4,l.firestore().collection("categories").where("name","==",t).get()]);case 1:return c.sent().size>0?(this.button_pressed=!1,this.config.displayMessage("this particular category exsist already exists",!1),[2]):(i={id:e,name:t,created_by:n+"|"+a,created_date:(new Date).toLocaleDateString()+" - "+(new Date).toLocaleTimeString(),modified_date:(new Date).toLocaleDateString()+" - "+(new Date).toLocaleTimeString(),timestamp:l.firestore.FieldValue.serverTimestamp()},l.firestore().collection("categories").doc(e).set(i).then((function(e){o.config.logActivity(n+"|"+a+" created this skill-set: "+t),o.cancelAddCat(),o.config.displayMessage("Successfully created",!0)})).catch((function(t){o.button_pressed=!1,o.config.displayMessage(""+t,!1)})),[3,3]);case 2:i={name:t,modified_date:(new Date).toLocaleDateString()+" - "+(new Date).toLocaleTimeString()},l.firestore().collection("categories").doc(this.selectedCategory.id).update(i).then((function(e){o.config.logActivity(n+"|"+a+" updated this skill-set: "+t),o.cancelAddCat(),o.config.displayMessage("Successfully updated",!0)})).catch((function(t){o.button_pressed=!1,o.config.displayMessage(""+t,!1)})),c.label=3;case 3:return[2]}}))},new((e=void 0)||(e=Promise))((function(n,i){function o(t){try{r(a.next(t))}catch(e){i(e)}}function c(t){try{r(a.throw(t))}catch(e){i(e)}}function r(t){var a;t.done?n(t.value):(a=t.value,a instanceof e?a:new e((function(t){t(a)}))).then(o,c)}r((a=a.apply(t,[])).next())}));var t,e,a},t.prototype.ngAfterViewInit=function(){d("#datatables").DataTable({pagingType:"full_numbers",lengthMenu:[[10,25,50,-1],[10,25,50,"All"]],responsive:!0,language:{search:"_INPUT_",searchPlaceholder:"Search records"}}),d("#datatables").DataTable(),d(".card .material-datatables label").addClass("form-group")},t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=g.Jb({type:t,selectors:[["app-category"]],decls:4,vars:2,consts:[[1,"main-content"],[1,"container-fluid"],["class","row",4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","card-header-primary","card-header-icon"],[1,"card-icon"],[1,"material-icons"],[1,"card-title"],["mat-raised-button","",1,"btn","btn-primary",3,"click"],[1,"card-body"],[1,"toolbar"],["class","material-datatables",4,"ngIf"],[1,"material-datatables"],["id","datatables","cellspacing","0","width","100%",1,"table","table-striped","table-no-bordered","table-hover",2,"width","100%"],[1,"disabled-sorting","text-right"],[1,"text-right"],[4,"ngFor","ngForOf"],["href","javascript:void(0)","data-toggle","tooltip","title","edit","data-placement","bottom",1,"btn","btn-link","btn-warning","btn-just-icon","edit",3,"click"],["href","javascript:void(0)","data-toggle","tooltip","title","delete","data-placement","bottom","class","btn btn-link btn-danger btn-just-icon remove",3,"click",4,"ngIf"],["href","javascript:void(0)","data-toggle","tooltip","title","delete","data-placement","bottom",1,"btn","btn-link","btn-danger","btn-just-icon","remove",3,"click"],[1,"col-md-10","offset-md-1"],[1,"card-header","card-header-rose","card-header-icon"],["method","#","action","#"],[1,"example-full-width"],["matInput","","placeholder","Skill-set Name","name","mname","type","text","id","cat_name",1,"form-control",3,"ngModel","ngModelChange"],[1,"card-footer"],["mat-raised-button","","type","submit",1,"btn","btn-fill","btn-rose","btn-block",3,"disabled","click"],["mat-raised-button","","type","submit",1,"btn","btn-fill","btn-block","btn-danger",3,"click"]],template:function(t,e){1&t&&(g.Vb(0,"div",0),g.Vb(1,"div",1),g.Lc(2,w,14,1,"div",2),g.Lc(3,V,19,3,"div",2),g.Ub(),g.Ub()),2&t&&(g.Cb(2),g.qc("ngIf",!e.addNewCat),g.Cb(1),g.qc("ngIf",e.addNewCat))},directives:[i.m,h.b,i.l,o.A,o.r,o.s,p.c,m.b,o.e,o.q,o.t],styles:[".sectn[_ngcontent-%COMP%]{padding:25px 20px}.fieldbtn[_ngcontent-%COMP%]{text-align:center}.rmvborder[_ngcontent-%COMP%]{border:none;outline:none;margin-left:20px;padding:10px}.rmvbr[_ngcontent-%COMP%]{padding:auto 17px;margin-left:24px}"]}),t}()}]}],k=function(){function t(){}return t.\u0275mod=g.Nb({type:t}),t.\u0275inj=g.Mb({factory:function(e){return new(e||t)},imports:[[i.c,n.g.forChild(U),o.l,c.a,r.b]]}),t}()}}]);